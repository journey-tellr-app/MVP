(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{136:function(e,t,a){},143:function(e,t,a){},144:function(e,t,a){},172:function(e,t,a){},174:function(e,t,a){},175:function(e,t,a){},177:function(e,t,a){},201:function(e,t,a){e.exports=a(369)},294:function(e,t,a){},298:function(e,t,a){},367:function(e,t,a){},368:function(e,t,a){},369:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),o=a(15),c=a.n(o),i=a(31),s=a(17),l=a(196),p=(a(210),Object(i.c)({loginMessage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";switch((arguments.length>1?arguments[1]:void 0).type){case"CLEAR_LOGIN_ERROR":return"";case"LOGIN_INPUT_ERROR":return"Enter your username and password!";case"LOGIN_FAILED":return"Oops! The username and password didn't match. Try again!";case"LOGIN_FAILED_NO_CODE":return"Oops! Something went wrong! Is the server running?";default:return e}},registrationMessage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";switch((arguments.length>1?arguments[1]:void 0).type){case"CLEAR_REGISTRATION_ERROR":return"";case"REGISTRATION_INPUT_ERROR":return"Choose a username and password!";case"REGISTRATION_FAILED":return"Oops! That didn't work. The username might already be taken. Try again!";default:return e}}})),u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"login";switch((arguments.length>1?arguments[1]:void 0).type){case"SET_TO_LOGIN_MODE":return"login";case"SET_TO_REGISTER_MODE":return"register";default:return e}},d=a(83),h={first_name:"",last_name:"",email:"",password:"",confirm_email:"",confirm_password:"",profile_pic:"./images/headshot-placeholder.jpg"},m=Object(i.c)({userInfo:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_USER":return t.payload;case"UNSET_USER":return{};default:return e}},registration:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"UPDATE_REGISTRATION":return Object(d.a)({},e,t.payload);case"ADD_IMAGE_REGISTER":var a={profile_pic:t.payload.data.Location};return Object(d.a)({},e,a);case"CLEAR_REGISTRATION":return h;default:return e}}}),E={name:"",title:"",caption:"",placeholder_image:"",intro:""},y={storyImage:"/images/placeholder.png"},f=Object(i.c)({contributedStoryReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return"SET_STORY_CONTRIBUTIONS"===t.type?t.payload:e},topStoriesReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return"SET_TOP_STORIES"===t.type?t.payload:e},completeStoryReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return"SET_COMPLETE_STORY"===t.type?t.payload:e},searchStoryReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return"SET_SEARCH_STORY"===t.type?t.payload:e},userStoryCountReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return"SET_USER_STORY_COUNT"===t.type?t.payload:e},userContributionCountReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return"SET_USER_CONTRIBUTION_COUNT"===t.type?t.payload:e},newStoryReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E,t=arguments.length>1?arguments[1]:void 0;return"SET_NEW_STORY"===t.type?t.payload:"RESET_NEW_STORY"===t.type?E:e},imageReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y,t=arguments.length>1?arguments[1]:void 0;return"ADD_IMAGE_STORY"===t.type?{storyImage:t.payload.data.Location}:"RESET_IMAGE_STORY"===t.type?y:e},contributors:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return"SET_CONTRIBUTORS"===t.type?t.payload:e}}),b={name:"",title:"",caption:"",placeholder_image:"",intro:""},v=[],g=Object(i.c)({templateReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return"SET_TEMPLATE"===t.type?t.payload:"SET_TEMPLATE_STORY_DROPDOWN"===t.type?t.payload:e},templateNewStoryReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,t=arguments.length>1?arguments[1]:void 0;return"SET_TEMPLATE_NEW_STORY"===t.type?t.payload:"SET_TEMPLATE_NEW_CREATE"===t.type?{name:"initial"}:"RESET_TEMPLATE_NEW_STORY"===t.type?b:e},templateNewChapterReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,t=arguments.length>1?arguments[1]:void 0;return"SET_TEMPLATE_NEW_CHAPTER"===t.type?t.payload:"RESET_TEMPLATE_NEW_CHAPTER"===t.type?v:e}}),O=Object(i.c)({invite:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_INVITES":return t.payload;default:return e}}}),T=[];var _=Object(i.c)({chapterReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return"SET_CHAPTER"===t.type?t.payload:e},newStoryChapterReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T,t=arguments.length>1?arguments[1]:void 0;return"SET_NEW_STORY_CHAPTER"===t.type?t.payload:"REMOVE_NEW_STORY_CHAPTER"===t.type?e.filter(function(e){return e!==t.payload}):"RESET_NEW_STORY_CHAPTER"===t.type?T:"UPDATE_NEW_STORY_CHAPTER"===t.type?function(e,t){return e.map(function(e,a){return a!==t.id?e:Object(d.a)({},e,t.item)})}(e,t.payload):e}}),S=a(90),j=[],x=Object(i.c)({employeeResults:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_EMPLOYEE_RESULTS":return t.payload;case"CLEAR_EMPLOYEE_RESULTS":return[];default:return e}},pending:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_PENDING_CONTRIBUTORS":return[].concat(Object(S.a)(e),[t.payload]);case"REMOVE_PENDING_CONTRIBUTOR":return e.filter(function(e){return e!==t.payload});case"RESET_PENDING_CONTRIBUTOR":return j;default:return e}}}),R=Object(i.c)({contributedStoryReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return"SET_STORY_CONTRIBUTIONS"===t.type?t.payload:e},summary:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return"SET_STORY_DETAIL"===t.type?t.payload:e},likes:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return"SET_STORY_DETAIL_LIKES"===t.type?t.payload:e},contributor:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return"SET_STORY_DETAIL_CONTRIBUTOR"===t.type?t.payload:e},chapter:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return"SET_STORY_DETAIL_CHAPTER"===t.type?t.payload:e}}),C=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_STORY_SEARCH_RESULTS":return t.payload;default:return e}},I=Object(i.c)({errors:p,loginMode:u,user:m,story:f,template:g,notification:O,chapter:_,contributor:x,storyDetail:R,searchResults:C}),k=a(5),w=a.n(k),N=a(6),A=a(21),D=a.n(A),L=a(371),P=w.a.mark(G),M=w.a.mark(B),U=w.a.mark(Y);function G(e){var t;return w.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,Object(N.b)({type:"CLEAR_LOGIN_ERROR"});case 3:return t={headers:{"Content-Type":"application/json"},withCredentials:!0},console.log(e.payload),a.next=7,D.a.post("api/user/login",e.payload,t);case 7:return a.next=9,Object(N.b)({type:"FETCH_USER"});case 9:a.next=22;break;case 11:if(a.prev=11,a.t0=a.catch(0),console.log("Error with user login:",a.t0),L.a.error("Login error"),401!==a.t0.response.status){a.next=20;break}return a.next=18,Object(N.b)({type:"LOGIN_FAILED"});case 18:a.next=22;break;case 20:return a.next=22,Object(N.b)({type:"LOGIN_FAILED_NO_CODE"});case 22:case"end":return a.stop()}},P,null,[[0,11]])}function B(e){var t;return w.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t={headers:{"Content-Type":"application/json"},withCredentials:!0},e.next=4,D.a.post("api/user/logout",t);case 4:return e.next=6,Object(N.b)({type:"UNSET_USER"});case 6:e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),console.log("Error with user logout:",e.t0),L.a.error("Logout error");case 12:case"end":return e.stop()}},M,null,[[0,8]])}function Y(){return w.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(N.d)("LOGIN",G);case 2:return e.next=4,Object(N.d)("LOGOUT",B);case 4:case"end":return e.stop()}},U)}var F=Y,H=w.a.mark(W),V=w.a.mark(z);function W(e){return w.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(N.b)({type:"CLEAR_REGISTRATION_ERROR"});case 3:return t.next=5,D.a.post("api/user/register",e.payload);case 5:return t.next=7,Object(N.b)({type:"LOGIN",payload:e.payload});case 7:return t.next=9,Object(N.b)({type:"SET_TO_LOGIN_MODE"});case 9:return t.next=11,Object(N.b)({type:"CLEAR_REGISTRATION"});case 11:t.next=19;break;case 13:return t.prev=13,t.t0=t.catch(0),console.log("Error with user registration:",t.t0),L.a.error("Error in registration"),t.next=19,Object(N.b)({type:"REGISTRATION_FAILED"});case 19:case"end":return t.stop()}},H,null,[[0,13]])}function z(){return w.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(N.d)("REGISTER",W);case 2:case"end":return e.stop()}},V)}var q=z,K=w.a.mark(X),J=w.a.mark(Q);function X(){var e,t;return w.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,e={headers:{"Content-Type":"application/json"},withCredentials:!0},a.next=4,D.a.get("api/user",e);case 4:return t=a.sent,a.next=7,Object(N.b)({type:"SET_USER",payload:t.data});case 7:return a.next=9,Object(N.b)({type:"GET_INVITES"});case 9:a.next=14;break;case 11:a.prev=11,a.t0=a.catch(0),console.log("User get request failed",a.t0);case 14:case"end":return a.stop()}},K,null,[[0,11]])}function Q(){return w.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(N.d)("FETCH_USER",X);case 2:case"end":return e.stop()}},J)}var Z=Q,$=w.a.mark(ae),ee=w.a.mark(re),te=w.a.mark(ne);function ae(e){var t,a;return w.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,D.a.get("/template");case 3:return t=e.sent,a={type:"SET_TEMPLATE_STORY_DROPDOWN",payload:t.data},e.next=7,Object(N.b)(a);case 7:e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),console.log("Error with storyTemplate:",e.t0),L.a.error("There was a problem when setting the templates");case 13:case"end":return e.stop()}},$,null,[[0,9]])}function re(e){var t,a,r,n;return w.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.prev=0,o.next=3,D.a.get("/template/story/".concat(e.payload));case 3:return t=o.sent,a={type:"SET_TEMPLATE_NEW_STORY",payload:t.data},o.next=7,Object(N.b)(a);case 7:return o.next=9,D.a.get("/template/chapter/".concat(e.payload));case 9:return r=o.sent,n={type:"SET_TEMPLATE_NEW_CHAPTER",payload:r.data},o.next=13,Object(N.b)(n);case 13:o.next=19;break;case 15:o.prev=15,o.t0=o.catch(0),console.log("Error with storyTemplateDetails:",o.t0),L.a.error("There was a problem using the story template");case 19:case"end":return o.stop()}},ee,null,[[0,15]])}function ne(){return w.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(N.d)("GET_TEMPLATE_STORY",ae);case 2:return e.next=4,Object(N.d)("GET_TEMPLATE_DETAILS",re);case 4:case"end":return e.stop()}},te)}var oe=ne,ce=w.a.mark(se),ie=w.a.mark(le);function se(e){return w.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,D.a.put("/api/user/update-profile",e.payload);case 3:return t.next=5,Object(N.b)({type:"FETCH_USER"});case 5:t.next=11;break;case 7:t.prev=7,t.t0=t.catch(0),console.log("Error with editProfile:",t.t0),L.a.error("Error editing the profile");case 11:case"end":return t.stop()}},ce,null,[[0,7]])}function le(){return w.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(N.d)("EDIT_PROFILE",se);case 2:case"end":return e.stop()}},ie)}var pe=le,ue=w.a.mark(me),de=w.a.mark(Ee),he=w.a.mark(ye);function me(e){var t;return w.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,D.a.get("/invite/".concat(e.payload));case 3:return t=a.sent,a.next=6,Object(N.b)({type:"SET_EMPLOYEE_RESULTS",payload:t.data});case 6:a.next=12;break;case 8:a.prev=8,a.t0=a.catch(0),console.log("Error with getEmployees saga",a.t0),L.a.error("Error getting contributors for search");case 12:case"end":return a.stop()}},ue,null,[[0,8]])}function Ee(e){return w.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,D.a.post("/invite/contributor/".concat(e.payload.story_id),e.payload.pendingContributor);case 3:t.next=9;break;case 5:t.prev=5,t.t0=t.catch(0),console.log("Error with storyTemplateDetails:",t.t0),L.a.error("Error adding a contributor");case 9:case"end":return t.stop()}},de,null,[[0,5]])}function ye(){return w.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(N.d)("GET_EMPLOYEES",me);case 2:return e.next=4,Object(N.d)("ADD_CONTRIBUTOR",Ee);case 4:case"end":return e.stop()}},he)}var fe=ye,be=w.a.mark(Te),ve=w.a.mark(_e),ge=w.a.mark(Se),Oe=w.a.mark(je);function Te(e){var t,a;return w.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,D.a.post("/awsS3",e.payload,{headers:{"Content-Type":"multipart/form-data"}}).then(function(e){t=e}).catch(function(e){console.log(e)});case 3:r.next=9;break;case 5:r.prev=5,r.t0=r.catch(0),console.log("Error with addImageAWS:",r.t0),L.a.error("Error sending the image to AWS");case 9:return a={type:e.nextType,payload:t,chapterId:e.chapterId,storyId:e.storyId},r.next=12,Object(N.b)(a);case 12:case"end":return r.stop()}},be,null,[[0,5]])}function _e(e){return w.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,D.a.put("/api/user/".concat(e.id),e.payload);case 3:return t.next=5,Object(N.b)({type:"FETCH_USER"});case 5:t.next=11;break;case 7:t.prev=7,t.t0=t.catch(0),console.log("Error with addImage:",t.t0),L.a.error("Error adding a user profile image");case 11:case"end":return t.stop()}},ve,null,[[0,7]])}function Se(e){return w.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,D.a.put("/api/user/".concat(e.id),e.payload);case 3:return t.next=5,Object(N.b)({type:"FETCH_USER"});case 5:t.next=11;break;case 7:t.prev=7,t.t0=t.catch(0),console.log("Error with addImage:",t.t0),L.a.error("Error updating user profile image");case 11:case"end":return t.stop()}},ge,null,[[0,7]])}function je(){return w.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(N.d)("ADD_IMAGE_AWS",Te);case 2:return e.next=4,Object(N.d)("ADD_IMAGE_PERSON",_e);case 4:return e.next=6,Object(N.d)("UPDATE_PICTURE",Se);case 6:case"end":return e.stop()}},Oe)}var xe=je,Re=w.a.mark(Le),Ce=w.a.mark(Pe),Ie=w.a.mark(Me),ke=w.a.mark(Ue),we=w.a.mark(Ge),Ne=w.a.mark(Be),Ae=w.a.mark(Ye),De=w.a.mark(Fe);function Le(e){var t;return w.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,D.a.get("story/story-contributions");case 3:return t=e.sent,e.next=6,Object(N.b)({type:"SET_STORY_CONTRIBUTIONS",payload:t.data});case 6:e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),console.log("Error in getMyContributions: ".concat(e.t0)),L.a.error("There was a problem when setting story contributions");case 12:case"end":return e.stop()}},Re,null,[[0,8]])}function Pe(e){var t;return w.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,D.a.get("story/recent");case 3:return t=e.sent,e.next=6,Object(N.b)({type:"SET_TOP_STORIES",payload:t.data});case 6:e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),console.log("Error in getStories: ".concat(e.t0)),L.a.error("There was a problem getting your top stories");case 12:case"end":return e.stop()}},Ce,null,[[0,8]])}function Me(e){var t,a;return w.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,D.a.post("/story",e.payload.story);case 3:if(t=r.sent,0===e.payload.chapter.length){r.next=8;break}return!0,r.next=8,D.a.post("/chapter/".concat(t.data,"/").concat(!0),e.payload.chapter);case 8:if(0===e.payload.contributor.length){r.next=11;break}return r.next=11,D.a.post("/invite/contributor/".concat(t.data),e.payload.contributor);case 11:return L.a.success("You successfully created a story!"),a={type:"CLEAR_NEW_STORY"},r.next=15,Object(N.b)(a);case 15:r.next=21;break;case 17:r.prev=17,r.t0=r.catch(0),console.log("Add story failed: ".concat(r.t0)),L.a.error("There was a problem when creating your story");case 21:case"end":return r.stop()}},Ie,null,[[0,17]])}function Ue(){var e,t,a,r;return w.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,e={type:"RESET_NEW_STORY"},n.next=4,Object(N.b)(e);case 4:return t={type:"RESET_NEW_STORY_CHAPTER"},n.next=7,Object(N.b)(t);case 7:return a={type:"RESET_PENDING_CONTRIBUTOR"},n.next=10,Object(N.b)(a);case 10:return r={type:"RESET_IMAGE_STORY"},n.next=13,Object(N.b)(r);case 13:n.next=19;break;case 15:n.prev=15,n.t0=n.catch(0),console.log("Error in clearNewStory saga: ".concat(n.t0)),L.a.error("Error with clearing stories");case 19:case"end":return n.stop()}},ke,null,[[0,15]])}function Ge(e){var t;return w.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,D.a.get("story/contributors/".concat(e.payload));case 3:return t=a.sent,a.next=6,Object(N.b)({type:"SET_CONTRIBUTORS",payload:t.data});case 6:a.next=12;break;case 8:a.prev=8,a.t0=a.catch(0),console.log("Error in getContributors saga: ".concat(a.t0)),L.a.error("Error getting contributors");case 12:case"end":return a.stop()}},we,null,[[0,8]])}function Be(){var e;return w.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,D.a.get("story/count/");case 3:return e=t.sent,t.next=6,Object(N.b)({type:"SET_USER_STORY_COUNT",payload:e.data.count});case 6:t.next=12;break;case 8:t.prev=8,t.t0=t.catch(0),console.log("Error in getStoryCount saga: ".concat(t.t0)),L.a.error("Error getting story count");case 12:case"end":return t.stop()}},Ne,null,[[0,8]])}function Ye(){var e;return w.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,D.a.get("story/count-contributions/");case 3:return e=t.sent,t.next=6,Object(N.b)({type:"SET_USER_CONTRIBUTION_COUNT",payload:e.data.count});case 6:t.next=12;break;case 8:t.prev=8,t.t0=t.catch(0),console.log("Error in getStoryCount saga: ".concat(t.t0)),L.a.error("Error getting story count");case 12:case"end":return t.stop()}},Ae,null,[[0,8]])}function Fe(){return w.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(N.d)("GET_MY_CONTRIBUTIONS",Le);case 2:return e.next=4,Object(N.d)("GET_TOP_STORIES",Pe);case 4:return e.next=6,Object(N.d)("POST_NEW_STORY",Me);case 6:return e.next=8,Object(N.d)("CLEAR_NEW_STORY",Ue);case 8:return e.next=10,Object(N.d)("GET_CONTRIBUTORS",Ge);case 10:return e.next=12,Object(N.d)("GET_STORY_COUNT",Be);case 12:return e.next=14,Object(N.d)("GET_CONTRIBUTION_COUNT",Ye);case 14:case"end":return e.stop()}},De)}var He=Fe,Ve=w.a.mark(qe),We=w.a.mark(Ke),ze=w.a.mark(Je);function qe(e){var t;return w.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,D.a.get("/invite/contributor");case 3:return t=e.sent,e.next=6,Object(N.b)({type:"SET_INVITES",payload:t.data});case 6:e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),console.log("Error with getInvites saga",e.t0),L.a.error("Problem with getting invites");case 12:case"end":return e.stop()}},Ve,null,[[0,8]])}function Ke(e){var t,a,r;return w.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,t=e.payload,a=t.invite_id,r=t.status,n.next=4,D.a.put("/invite/contributor/".concat(a,"/").concat(r));case 4:return n.next=6,Object(N.b)({type:"GET_INVITES"});case 6:n.next=12;break;case 8:n.prev=8,n.t0=n.catch(0),console.log("Error in inviteResponse saga",n.t0),L.a.error("Problem with invite response");case 12:case"end":return n.stop()}},We,null,[[0,8]])}function Je(){return w.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(N.d)("GET_INVITES",qe);case 2:return e.next=4,Object(N.c)("SEND_INVITE_RESPONSE",Ke);case 4:case"end":return e.stop()}},ze)}var Xe=Je,Qe=w.a.mark(ct),Ze=w.a.mark(it),$e=w.a.mark(st),et=w.a.mark(lt),tt=w.a.mark(pt),at=w.a.mark(ut),rt=w.a.mark(dt),nt=w.a.mark(ht),ot=w.a.mark(mt);function ct(e){var t;return w.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,D.a.get("story/detail/summary/".concat(e.payload));case 3:return t=a.sent,a.next=6,Object(N.b)({type:"SET_STORY_DETAIL",payload:t.data});case 6:a.next=12;break;case 8:a.prev=8,a.t0=a.catch(0),console.log("Error in getting individual story: ".concat(a.t0)),L.a.error("Error loading a story");case 12:case"end":return a.stop()}},Qe,null,[[0,8]])}function it(e){var t;return w.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,D.a.get("story/detail/chapter/".concat(e.payload));case 3:return t=a.sent,a.next=6,Object(N.b)({type:"SET_STORY_DETAIL_CHAPTER",payload:t.data});case 6:a.next=12;break;case 8:a.prev=8,a.t0=a.catch(0),console.log("Error in getChapterDetail saga:",a.t0),L.a.error("Error loading the chapter detail");case 12:case"end":return a.stop()}},Ze,null,[[0,8]])}function st(e){var t;return w.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,D.a.put("/chapter",e.payload);case 3:return t=a.sent,a.next=6,Object(N.b)({type:"GET_STORY_CHAPTER_DETAIL",payload:t.data[0].story_id});case 6:a.next=12;break;case 8:a.prev=8,a.t0=a.catch(0),console.log("Error in editChapter saga:",a.t0),L.a.error("Error in chapter edit");case 12:case"end":return a.stop()}},$e,null,[[0,8]])}function lt(e){return w.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,D.a.put("/story",e.payload);case 3:return t.next=5,Object(N.b)({type:"GET_INDIVIDUAL_STORY",payload:e.payload.id});case 5:t.next=11;break;case 7:t.prev=7,t.t0=t.catch(0),console.log("Error in editStory saga:",t.t0),L.a.error("Error in story edit");case 11:case"end":return t.stop()}},et,null,[[0,7]])}function pt(e){var t;return w.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,D.a.get("/story/detail/contributor/".concat(e.payload));case 3:return t=a.sent,a.next=6,Object(N.b)({type:"SET_STORY_DETAIL_CONTRIBUTOR",payload:t.data});case 6:a.next=12;break;case 8:a.prev=8,a.t0=a.catch(0),console.log("Error getting story contributors: ".concat(a.t0)),L.a.error("Error getting the story contributors");case 12:case"end":return a.stop()}},tt,null,[[0,8]])}function ut(e){var t;return w.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,D.a.get("/story/detail/likes/".concat(e.payload),e.payload);case 3:return t=a.sent,a.next=6,Object(N.b)({type:"SET_STORY_DETAIL_LIKES",payload:t.data});case 6:a.next=12;break;case 8:a.prev=8,a.t0=a.catch(0),console.log("Error getting story likes: ".concat(a.t0)),L.a.error("Error getting story likes");case 12:case"end":return a.stop()}},at,null,[[0,8]])}function dt(e){var t;return w.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,t=e.payload,a.next=4,D.a.put("/story/complete/".concat(t));case 4:return a.next=6,Object(N.b)({type:"GET_INDIVIDUAL_STORY",payload:t});case 6:a.next=11;break;case 8:a.prev=8,a.t0=a.catch(0),console.log("Error finalizing story:",a.t0);case 11:case"end":return a.stop()}},rt,null,[[0,8]])}function ht(e){var t;return w.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,t={image:e.payload.data.Location},a.next=4,D.a.put("/story/image/".concat(e.storyId),t);case 4:return a.next=6,Object(N.b)({type:"GET_INDIVIDUAL_STORY",payload:e.storyId});case 6:a.next=12;break;case 8:a.prev=8,a.t0=a.catch(0),console.log("Error in changeStoryImage: ".concat(a.t0)),L.a.error("Error when updating story image");case 12:case"end":return a.stop()}},nt,null,[[0,8]])}function mt(){return w.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(N.d)("GET_INDIVIDUAL_STORY",ct);case 2:return e.next=4,Object(N.d)("GET_STORY_CHAPTER_DETAIL",it);case 4:return e.next=6,Object(N.d)("GET_STORY_CONTRIBUTORS",pt);case 6:return e.next=8,Object(N.d)("EDIT_CHAPTER",st);case 8:return e.next=10,Object(N.d)("EDIT_STORY",lt);case 10:return e.next=12,Object(N.d)("GET_STORY_LIKES",ut);case 12:return e.next=14,Object(N.d)("COMPLETE_STORY",dt);case 14:return e.next=16,Object(N.d)("ADD_IMAGE_EDIT_STORY_IMAGE",ht);case 16:case"end":return e.stop()}},ot)}var Et=mt,yt=w.a.mark(gt),ft=w.a.mark(Ot),bt=w.a.mark(Tt),vt=w.a.mark(_t);function gt(e){var t;return w.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,D.a.get("/search-story/author/".concat(e.payload));case 3:return t=a.sent,a.next=6,Object(N.b)({type:"SET_STORY_SEARCH_RESULTS",payload:t.data});case 6:a.next=12;break;case 8:a.prev=8,a.t0=a.catch(0),console.log("getStoriesAuthor failed: ".concat(a.t0)),L.a.error("Error serching by author");case 12:case"end":return a.stop()}},yt,null,[[0,8]])}function Ot(e){var t;return w.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,D.a.get("/search-story/title/".concat(e.payload));case 3:return t=a.sent,a.next=6,Object(N.b)({type:"SET_STORY_SEARCH_RESULTS",payload:t.data});case 6:a.next=12;break;case 8:a.prev=8,a.t0=a.catch(0),console.log("getStoriesAuthor failed: ".concat(a.t0)),L.a.error("Error serching by title");case 12:case"end":return a.stop()}},ft,null,[[0,8]])}function Tt(e){var t;return w.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,D.a.get("/search-story/description/".concat(e.payload));case 3:return t=a.sent,a.next=6,Object(N.b)({type:"SET_STORY_SEARCH_RESULTS",payload:t.data});case 6:a.next=12;break;case 8:a.prev=8,a.t0=a.catch(0),console.log("getStoriesAuthor failed: ".concat(a.t0)),L.a.error("Error serching by description");case 12:case"end":return a.stop()}},bt,null,[[0,8]])}function _t(){return w.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(N.d)("GET_SEARCH_STORIES_AUTHOR",gt);case 2:return e.next=4,Object(N.d)("GET_SEARCH_STORIES_TITLE",Ot);case 4:return e.next=6,Object(N.d)("GET_SEARCH_STORIES_DESCRIPTION",Tt);case 6:case"end":return e.stop()}},vt)}var St=_t,jt=w.a.mark(Ct),xt=w.a.mark(It),Rt=w.a.mark(kt);function Ct(e){return w.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,!1,t.next=4,D.a.post("chapter/".concat(e.payload.storyId,"/").concat(!1),e.payload.chapter);case 4:return t.next=6,Object(N.b)({type:"GET_STORY_CHAPTER_DETAIL",payload:e.payload.storyId});case 6:t.next=12;break;case 8:t.prev=8,t.t0=t.catch(0),console.log("Error in addExistingStoryChapter: ".concat(t.t0)),L.a.error("Error updating the chapter");case 12:case"end":return t.stop()}},jt,null,[[0,8]])}function It(e){var t,a;return w.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,t={image:e.payload.data.Location},r.next=4,D.a.put("/chapter/image/".concat(e.chapterId),t);case 4:return a=r.sent,r.next=7,Object(N.b)({type:"GET_STORY_CHAPTER_DETAIL",payload:a.data});case 7:r.next=13;break;case 9:r.prev=9,r.t0=r.catch(0),console.log("Error in changeChapterImage: ".concat(r.t0)),L.a.error("Error when updating chapter image");case 13:case"end":return r.stop()}},xt,null,[[0,9]])}function kt(){return w.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(N.d)("ADD_EXISTING_STORY_CHAPTER",Ct);case 2:return e.next=4,Object(N.d)("ADD_IMAGE_CHAPTER",It);case 4:case"end":return e.stop()}},Rt)}var wt=kt,Nt=w.a.mark(Lt),At=w.a.mark(Pt),Dt=w.a.mark(Mt);function Lt(e){return w.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,D.a.post("/like",e.payload);case 3:return t.next=5,Object(N.b)({type:"GET_MY_CONTRIBUTIONS"});case 5:t.next=11;break;case 7:t.prev=7,t.t0=t.catch(0),console.log("Error in likeContributedStory saga: ".concat(t.t0)),L.a.error("Error getting likes for my contributed stories");case 11:case"end":return t.stop()}},Nt,null,[[0,7]])}function Pt(e){return w.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,D.a.post("/like",e.payload);case 3:return t.next=5,Object(N.b)({type:"GET_TOP_STORIES"});case 5:t.next=11;break;case 7:t.prev=7,t.t0=t.catch(0),console.log("Error in likeTopStory saga: ".concat(t.t0)),L.a.error("Error liking the top stories");case 11:case"end":return t.stop()}},At,null,[[0,7]])}function Mt(){return w.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(N.d)("LIKE_CONTRIBUTED_STORY",Lt);case 2:return e.next=4,Object(N.d)("LIKE_TOP_STORY",Pt);case 4:case"end":return e.stop()}},Dt)}var Ut=Mt,Gt=w.a.mark(Bt);function Bt(){return w.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(N.a)([Ut(),F(),q(),Z(),oe(),pe(),fe(),xe(),He(),Xe(),Et(),St(),wt()]);case 2:case"end":return e.stop()}},Gt)}var Yt=a(8),Ft=a(9),Ht=a(11),Vt=a(10),Wt=a(12),zt=a(386),qt=a(149),Kt=a(390),Jt=a(387),Xt=a(192),Qt=a(373),Zt=a(186),$t=(a(136),a(378)),ea=a(56),ta=a(385),aa=a(77),ra=a(46),na=function(e){function t(){var e,a;Object(Yt.a)(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(a=Object(Ht.a)(this,(e=Object(Vt.a)(t)).call.apply(e,[this].concat(n)))).handleReadStory=function(e){a.props.history.push("/existing-story/".concat(a.props.story_id))},a.handleLike=function(e){a.props.user_id!=a.props.story.contributedStoryReducer[0].author&&a.props.dispatch({type:"LIKE_CONTRIBUTED_STORY",payload:{user_id:a.props.user_id,story_id:a.props.story_id}})},a.componentDidMount=function(e){a.props.dispatch({type:"GET_CONTRIBUTORS",payload:a.props.story_id})},a}return Object(Wt.a)(t,e),Object(Ft.a)(t,[{key:"render",value:function(){return n.a.createElement("div",null,n.a.createElement($t.a,{id:"card",bordered:!0,style:{width:325},cover:n.a.createElement("img",{className:"story-photo",alt:"headshot of author",src:this.props.header_photo}),actions:[n.a.createElement(ea.a,{icon:"like",onClick:this.handleLike},n.a.createElement(ta.a,{count:this.props.likes,style:{backgroundColor:"#fff",color:"#999",boxShadow:"0 0 0 1px #d9d9d9 inset"}})),n.a.createElement(ea.a,{onClick:this.handleReadStory},"Read")]},n.a.createElement(aa.a,null,n.a.createElement(ra.a,{span:24},n.a.createElement("h1",{id:"story-title"},this.props.title))),n.a.createElement(aa.a,{gutter:8},n.a.createElement(ra.a,{span:6}),n.a.createElement(ra.a,{span:6},n.a.createElement("img",{id:"author-avatar",alt:"author avatar",src:this.props.profile_pic})),n.a.createElement(ra.a,{span:6},n.a.createElement("h5",{id:"story-author",align:"left"},"By ",this.props.author)),n.a.createElement(ra.a,{span:6}))),n.a.createElement("br",null),n.a.createElement("br",null))}}]),t}(r.Component),oa=Object(s.b)(function(e){return{story:e.story,storyDetail:e.storyDetail,contributors:e.story.contributors}})(na),ca=a(372),ia=function(e){function t(){var e,a;Object(Yt.a)(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(a=Object(Ht.a)(this,(e=Object(Vt.a)(t)).call.apply(e,[this].concat(n)))).componentDidMount=function(){a.props.dispatch({type:"GET_MY_CONTRIBUTIONS"})},a.handleStartStory=function(){a.props.history.push("/choose-template")},a}return Object(Wt.a)(t,e),Object(Ft.a)(t,[{key:"render",value:function(){var e=this;return n.a.createElement("div",{className:"contributions"},0!==this.props.contributedStories.length?n.a.createElement("div",null,n.a.createElement(ca.a,{swipeToSlide:!0},this.props.contributedStories.map(function(t,a){return n.a.createElement(oa,{story:t,user_id:e.props.userInfo.id,history:e.props.history,story_id:t.story_id,key:a,header_photo:t.header_photo,title:t.title,intro:t.intro,author:t.first_name+" "+t.last_name,profile_pic:t.profile_pic,likes:t.likes})}))):n.a.createElement("div",{className:"center-button"},n.a.createElement(ea.a,{align:"center",type:"primary",onClick:this.handleStartStory},"Start A New Story!")))}}]),t}(r.Component),sa=Object(s.b)(function(e){return{story:e.story,userInfo:e.user.userInfo,contributedStories:e.story.contributedStoryReducer}})(ia),la=function(e){function t(){var e,a;Object(Yt.a)(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(a=Object(Ht.a)(this,(e=Object(Vt.a)(t)).call.apply(e,[this].concat(n)))).handleReadStory=function(e){console.log("in hRS",a.props),a.props.history.push("/existing-story/".concat(a.props.story_id))},a.handleLike=function(e){a.props.user_id!==a.props.story.contributedStoryReducer[0].author&&a.props.dispatch({type:"LIKE_TOP_STORY",payload:{user_id:a.props.user_id,story_id:a.props.story_id}})},a.componentDidMount=function(e){a.props.dispatch({type:"GET_CONTRIBUTORS",payload:a.props.story_id})},a}return Object(Wt.a)(t,e),Object(Ft.a)(t,[{key:"render",value:function(){return n.a.createElement("div",{align:"center"},n.a.createElement($t.a,{id:"card",bordered:!0,style:{width:325},cover:n.a.createElement("img",{className:"story-photo",alt:"headshot of author",src:this.props.header_photo}),actions:[n.a.createElement(ea.a,{icon:"like",onClick:this.handleLike},n.a.createElement(ta.a,{count:this.props.likes,style:{backgroundColor:"#fff",color:"#999",boxShadow:"0 0 0 1px #d9d9d9 inset"}})),n.a.createElement(ea.a,{onClick:this.handleReadStory},"Read")]},n.a.createElement(aa.a,null,n.a.createElement(ra.a,{span:24},n.a.createElement("h1",{id:"story-title"},this.props.title))),n.a.createElement(aa.a,{gutter:8},n.a.createElement(ra.a,{span:6}),n.a.createElement(ra.a,{span:6},n.a.createElement("img",{id:"author-avatar",alt:"author avatar",src:this.props.profile_pic})),n.a.createElement(ra.a,{span:6},n.a.createElement("h5",{id:"story-author",align:"left"},"By ",this.props.author)),n.a.createElement(ra.a,{span:6}))),n.a.createElement("br",null),n.a.createElement("br",null))}}]),t}(r.Component),pa=Object(s.b)(function(e){return{story:e.story,storyDetail:e.storyDetail}})(la),ua=function(e){function t(){var e,a;Object(Yt.a)(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(a=Object(Ht.a)(this,(e=Object(Vt.a)(t)).call.apply(e,[this].concat(n)))).componentDidMount=function(){a.props.dispatch({type:"GET_TOP_STORIES"})},a}return Object(Wt.a)(t,e),Object(Ft.a)(t,[{key:"render",value:function(){var e=this;return n.a.createElement("div",{className:"top-stories"},n.a.createElement(ca.a,{swipeToSlide:!0},this.props.topStories.map(function(t,a){return n.a.createElement(pa,{user_id:e.props.userInfo.id,story_id:t.story_id,history:e.props.history,key:a,header_photo:t.header_photo,title:t.title,intro:t.intro,author:t.first_name+" "+t.last_name,profile_pic:t.profile_pic,likes:t.likes})})))}}]),t}(r.Component),da=Object(s.b)(function(e){return{userInfo:e.user.userInfo,topStories:e.story.topStoriesReducer}})(ua),ha=a(380),ma=(a(294),ha.a.Title),Ea=function(e){function t(){return Object(Yt.a)(this,t),Object(Ht.a)(this,Object(Vt.a)(t).apply(this,arguments))}return Object(Wt.a)(t,e),Object(Ft.a)(t,[{key:"render",value:function(){return n.a.createElement(aa.a,{type:"flex",justify:"space-around",align:"middle",gutter:16,className:"sub-header"},n.a.createElement(ma,{level:3,className:"sub-header-text"},this.props.headerText))}}]),t}(r.Component),ya=function(e){function t(){return Object(Yt.a)(this,t),Object(Ht.a)(this,Object(Vt.a)(t).apply(this,arguments))}return Object(Wt.a)(t,e),Object(Ft.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.invite.length>0&&Qt.a.open({message:"Welcome, ".concat(this.props.user.first_name),description:"You have ".concat(this.props.invite.length," notifications"),duration:0,onClick:function(){e.props.history.push("/notification")}})}},{key:"render",value:function(){return n.a.createElement("div",{align:"center"},n.a.createElement(Ea,{headerText:"Home"}),n.a.createElement(Zt.a,null,"My Stories and Contributions"),n.a.createElement(sa,{history:this.props.history}),n.a.createElement(Zt.a,null,"Top Stories at Prime"),n.a.createElement(da,{history:this.props.history}))}}]),t}(r.Component),fa=Object(s.b)(function(e){return{invite:e.notification.invite,user:e.user.userInfo}})(ya),ba=(a(298),a(383)),va=a(374),ga=function(e){function t(){var e,a;Object(Yt.a)(this,t);for(var r=arguments.length,o=new Array(r),c=0;c<r;c++)o[c]=arguments[c];return(a=Object(Ht.a)(this,(e=Object(Vt.a)(t)).call.apply(e,[this].concat(o)))).buildListItems=function(e){return n.a.createElement(ba.a.Item,null,n.a.createElement(ba.a.Item.Meta,{avatar:n.a.createElement(va.a,{src:"https://zos.alipayobjects.com/rmsportal/ODTLcjxAfvqbxHnVXCYX.png"}),title:n.a.createElement("a",{href:"https://ant.design"},"title"),description:e.status}))},a.handleInvite=function(e,t,r){console.log("error error"),a.props.dispatch({type:"SEND_INVITE_RESPONSE",payload:{invite_id:e.invite_id,status:t}}),"accepted"===t&&a.props.history.push("/existing-story/".concat(e.story_id))},a}return Object(Wt.a)(t,e),Object(Ft.a)(t,[{key:"render",value:function(){var e=this,t=this.props.invite;return n.a.createElement(ba.a,{className:"notification-item",itemLayout:"horizontal",dataSource:t,renderItem:function(t){return n.a.createElement(ba.a.Item,{actions:[n.a.createElement(ea.a,{size:"small",id:"notification-btn",onClick:e.handleInvite.bind(e,t,"accepted")},"Accept"),n.a.createElement(ea.a,{size:"small",id:"notification-btn",onClick:e.handleInvite.bind(e,t,"rejected")},"Maybe Later")]},n.a.createElement(ba.a.Item.Meta,{avatar:n.a.createElement(va.a,{src:t.profile_pic}),description:"".concat(t.first_name," ").concat(t.last_name,' invited you to contribute to: "').concat(t.title,'"')}))}})}}]),t}(r.Component),Oa=Object(s.b)()(ga),Ta=function(e){function t(){return Object(Yt.a)(this,t),Object(Ht.a)(this,Object(Vt.a)(t).apply(this,arguments))}return Object(Wt.a)(t,e),Object(Ft.a)(t,[{key:"componentDidMount",value:function(){this.props.dispatch({type:"GET_INVITES"})}},{key:"render",value:function(){var e=this.props.invite;return n.a.createElement("div",null,n.a.createElement("div",{className:"list",align:"center"},n.a.createElement(Ea,{headerText:"Notifications"}),e.length>0?n.a.createElement(Oa,{story_id:e.story_id,history:this.props.history,invite:e}):n.a.createElement(Zt.a,null,"You have no invites at this time")))}}]),t}(r.Component),_a=Object(s.b)(function(e){return{invite:e.notification.invite}})(Ta),Sa=a(49),ja=a(197),xa=a(18),Ra=a(381),Ca=(a(172),a(173),a(187)),Ia=a.n(Ca),ka=(n.a.createElement(xa.a,{type:"loading",style:{fontSize:24},spin:!0}),function(e){function t(){var e,a;Object(Yt.a)(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(a=Object(Ht.a)(this,(e=Object(Vt.a)(t)).call.apply(e,[this].concat(n)))).handleLike=function(e){a.props.dispatch({type:"LIKE_CONTRIBUTED_STORY",payload:{user_id:a.props.user_id,story_id:a.props.story_id}})},a.handleReadStory=function(e){a.props.history.push("/existing-story/".concat(a.props.story_id))},a.componentDidMount=function(){a.handleDispatch()},a.handleDispatch=function(){a.props.dispatch({type:"GET_STORY_LIKES",payload:a.props.story.contributedStoryReducer[0].story_id})},a.handleLike=function(e){a.props.dispatch({type:"LIKE_CONTRIBUTED_STORY",payload:{user_id:a.props.user_id,story_id:a.props.story.contributedStoryReducer[0].story_id}})},a}return Object(Wt.a)(t,e),Object(Ft.a)(t,[{key:"render",value:function(){return n.a.createElement("div",{className:"card-div"},n.a.createElement($t.a,{className:"profile-story-cards",style:{width:325},cover:n.a.createElement("img",{className:"story-photo",src:this.props.header_photo,alt:"story"}),actions:[n.a.createElement(ea.a,{id:"like-btn",onClick:this.handleLike},n.a.createElement(xa.a,{type:"like"}),"Like"),n.a.createElement(ea.a,{id:"like-btn",onClick:this.handleReadStory},"Review")]},n.a.createElement("h3",{className:"story-title",onClick:this.handleReadStory,level:4},this.props.title),n.a.createElement("p",null,this.props.likes," Likes")))}}]),t}(r.Component)),wa=Object(s.b)(function(e){return{story:e.story,storyDetail:e.storyDetail}})(ka),Na=function(e){function t(){var e,a;Object(Yt.a)(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(a=Object(Ht.a)(this,(e=Object(Vt.a)(t)).call.apply(e,[this].concat(n)))).componentDidMount=function(){a.props.dispatch({type:"GET_MY_CONTRIBUTIONS"})},a}return Object(Wt.a)(t,e),Object(Ft.a)(t,[{key:"render",value:function(){var e=this;return n.a.createElement("div",{className:"contributions"},n.a.createElement("div",null,this.props.story.contributedStoryReducer.map(function(t,a){return n.a.createElement(wa,{user_id:e.props.userInfo.id,key:a,history:e.props.history,story_id:t.story_id,header_photo:t.header_photo,title:t.title,intro:t.intro,author:t.first_name+" "+t.last_name,profile_pic:t.profile_pic,likes:t.likes})})))}}]),t}(r.Component),Aa=Object(s.b)(function(e){return{userInfo:e.user.userInfo,story:e.story,storyDetail:e.storyDetail.likes,contributedStories:e.story.contributedStoryReducer}})(Na),Da=ha.a.Title,La=ha.a.Text,Pa=ja.a.TextArea,Ma=function(e){function t(){var e,a;Object(Yt.a)(this,t);for(var r=arguments.length,o=new Array(r),c=0;c<r;c++)o[c]=arguments[c];return(a=Object(Ht.a)(this,(e=Object(Vt.a)(t)).call.apply(e,[this].concat(o)))).state={isHidden:!0,id:a.props.user.userInfo.id,first_name:a.props.user.userInfo.first_name,last_name:a.props.user.userInfo.last_name,bio:a.props.user.userInfo.bio,visible:!1,file:null},a.componentDidMount=function(){a.props.dispatch({type:"GET_CONTRIBUTION_COUNT"}),a.props.dispatch({type:"GET_STORY_COUNT"})},a.showModal=function(){a.setState({visible:!0})},a.handleOk=function(e){console.log(e),a.submitFile(),a.setState({visible:!1})},a.handleCancel=function(e){console.log(e),a.setState({visible:!1})},a.submitFile=function(e){var t=new FormData;t.append("file",a.state.file);var r={type:"ADD_IMAGE_AWS",nextType:"ADD_IMAGE_".concat("PERSON"),payload:t,id:a.props.user.userInfo.id};a.props.dispatch(r)},a.appendPic=function(){var e=a.state.file,t=URL.createObjectURL(e);return n.a.createElement("img",{height:"150",src:t,alt:"thumbnail chosen"})},a.handleFileUpload=function(e){a.setState({file:e.target.files[0]})},a.handleChange=function(e){return function(t){a.setState(Object(Sa.a)({},e,t.target.value))}},a.testThings=function(){console.log(a.props.reduxStore.user)},a}return Object(Wt.a)(t,e),Object(Ft.a)(t,[{key:"onEditBtnClick",value:function(){this.setState(function(e){return{isHidden:!e.isHidden}})}},{key:"submitEditedName",value:function(){var e={id:this.state.id,first_name:this.state.first_name,last_name:this.state.last_name,bio:this.state.bio};console.log(e),this.props.dispatch({type:"EDIT_PROFILE",payload:e}),this.setState(function(e){return{isHidden:!e.isHidden}})}},{key:"render",value:function(){return console.log(this.props.story),n.a.createElement("div",{className:"container"},n.a.createElement("div",{className:"profile-header"},n.a.createElement(aa.a,{gutter:16},n.a.createElement(ra.a,{xs:6},n.a.createElement("img",{onClick:this.showModal,className:"contain",src:this.props.user.userInfo.profile_pic,alt:"profile-pic"})),this.state.isHidden?this.renderStaticName():this.renderEditName()),n.a.createElement(Zt.a,null),n.a.createElement(aa.a,{gutter:16},n.a.createElement(ra.a,{xs:24})),n.a.createElement("div",{className:"stats-div"},n.a.createElement(aa.a,{gutter:16},n.a.createElement(ra.a,{xs:24},n.a.createElement(xa.a,{className:"profile-element",type:"calendar",style:{fontSize:"14px"}}),n.a.createElement(La,{className:"stats-text"},"Member since\xa0",Ia()(this.props.user.userInfo.date_created).format("MMM Do, YYYY")))),n.a.createElement(aa.a,{gutter:16},n.a.createElement(ra.a,{xs:24},n.a.createElement(xa.a,{className:"profile-element",type:"book",style:{fontSize:"14px"}}),n.a.createElement(La,{className:"stats-text"},this.props.story.userStoryCountReducer,"\xa0Stories"))),n.a.createElement(aa.a,{gutter:16},n.a.createElement(ra.a,{xs:24},n.a.createElement(xa.a,{className:"profile-element",type:"profile",style:{fontSize:"14px"}}),n.a.createElement(La,{className:"stats-text"},this.props.story.userContributionCountReducer,"\xa0Contributions")))),n.a.createElement(Zt.a,null)),n.a.createElement("div",{align:"center"},n.a.createElement(aa.a,{gutter:8},n.a.createElement(ra.a,{xs:24},n.a.createElement(Da,{level:4},"Stories"))),n.a.createElement(aa.a,{gutter:16},n.a.createElement(ra.a,{xs:24},this.props.story?n.a.createElement(Aa,{history:this.props.history}):n.a.createElement("p",null,"loading...")))),n.a.createElement("div",null,n.a.createElement(Ra.a,{visible:this.state.visible,onOk:this.handleOk,onCancel:this.handleCancel},n.a.createElement(aa.a,{type:"flex",justify:"center"},n.a.createElement("div",null,"Choose Photo From Library:"),n.a.createElement("input",{type:"file",accept:"image/*",onChange:this.handleFileUpload}),null!==this.state.file&&this.appendPic()))))}},{key:"renderEditName",value:function(){return n.a.createElement(ra.a,{xs:12},n.a.createElement(ja.a,{className:"edit-input",size:"small",onChange:this.handleChange("first_name"),placeholder:"first name"}),n.a.createElement(ja.a,{className:"edit-input",size:"small",onChange:this.handleChange("last_name"),placeholder:"last name"}),n.a.createElement(Pa,{className:"edit-input",onChange:this.handleChange("bio"),placeholder:"enter a short bio"}),n.a.createElement(ea.a,{className:"edit-element",id:"edit-btn",onClick:this.onEditBtnClick.bind(this)},"Cancel"),n.a.createElement(ea.a,{className:"edit-element",id:"edit-btn",onClick:this.submitEditedName.bind(this)},"Save"))}},{key:"renderStaticName",value:function(){return n.a.createElement("div",null,n.a.createElement(ra.a,{xs:16},n.a.createElement(La,{id:"user-name",level:4},this.props.user.userInfo.first_name,"\xa0",this.props.user.userInfo.last_name)),n.a.createElement(aa.a,{gutter:16},n.a.createElement(ra.a,{xs:8}),n.a.createElement(ra.a,{xs:16},n.a.createElement(La,{className:"text"},this.props.user.userInfo.bio))),n.a.createElement(aa.a,{gutter:16},n.a.createElement(ra.a,{xs:6}),n.a.createElement(ra.a,{xs:18},n.a.createElement(ea.a,{size:"small",className:"edit-element",id:"edit-btn",onClick:this.onEditBtnClick.bind(this)},"Edit Profile"))))}}]),t}(r.Component),Ua=Object(s.b)(function(e){return{user:e.user,story:e.story}})(Ma),Ga=a(61),Ba=(a(174),function(e){function t(){var e,a;Object(Yt.a)(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(a=Object(Ht.a)(this,(e=Object(Vt.a)(t)).call.apply(e,[this].concat(n)))).state={dropdown:"AUTHOR"},a.handleChange=function(e){a.setState({dropdown:"".concat(e)})},a.sendSearch=function(e){var t={type:"GET_SEARCH_STORIES_".concat(a.state.dropdown),payload:e.toLowerCase()};a.props.dispatch(t)},a}return Object(Wt.a)(t,e),Object(Ft.a)(t,[{key:"render",value:function(){var e=this,t=ja.a.Search,a=Ga.a.Option,r=n.a.createElement(Ga.a,{defaultValue:"Author",onChange:this.handleChange,style:{width:115},justify:"center"},n.a.createElement(a,{value:"AUTHOR"},"Author"),n.a.createElement(a,{value:"TITLE"},"Title"),n.a.createElement(a,{value:"DESCRIPTION"},"Description"));return n.a.createElement("div",{className:"box"},n.a.createElement(t,{addonBefore:r,placeholder:"Search",onSearch:function(t){return e.sendSearch(t)},style:{width:"100%"}}))}}]),t}(r.Component)),Ya=Object(s.b)()(Ba),Fa=a(375),Ha=function(e){function t(){var e,a;Object(Yt.a)(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(a=Object(Ht.a)(this,(e=Object(Vt.a)(t)).call.apply(e,[this].concat(n)))).state={photoFlipped:!1},a.handleClick=function(){a.props.history.push("/existing-story/".concat(a.props.item.story_id))},a.handleDescription=function(){return a.props.item.intro.length<100?a.props.item.intro.substring(0,100):a.props.item.intro.length?"".concat(a.props.item.intro.substring(0,100),"..."):void 0},a.flipPhoto=function(){a.setState({photoFlipped:!a.state.photoFlipped})},a}return Object(Wt.a)(t,e),Object(Ft.a)(t,[{key:"render",value:function(){var e=this.props.item,t=e.title,a=e.header_photo,r=e.intro,o=e.caption,c=e.full_name,i=e.profile_pic,s=e.story_id;return n.a.createElement(aa.a,{type:"flex",justify:"center"},n.a.createElement(ra.a,{span:18},n.a.createElement(ba.a.Item,{key:t,extra:this.state.photoFlipped?n.a.createElement("div",{style:{width:272,height:204,borderStyle:"solid"},onClick:this.flipPhoto},n.a.createElement(ha.a,{style:{textAlign:"center",paddingTop:20}},o)):n.a.createElement("img",{alt:"logo",src:a,onClick:this.flipPhoto,style:{objectFit:"contain",width:272}})},n.a.createElement(aa.a,{type:"flex",align:"middle",justify:"center"},n.a.createElement(ra.a,{span:24},n.a.createElement(ha.a.Title,{level:4,style:{textDecoration:"none",textAlign:"center"}},n.a.createElement(qt.a,{to:"/existing-story/".concat(s)},t))),n.a.createElement(ra.a,{span:24},n.a.createElement(aa.a,{type:"flex",align:"middle",justify:"center",style:{marginBottom:20}},n.a.createElement(ra.a,{span:8},n.a.createElement(va.a,{size:64,src:i})),n.a.createElement(ra.a,{span:12},n.a.createElement(ha.a,null,"By ".concat(c))))),r.length>80&&n.a.createElement(ra.a,{span:20},n.a.createElement(ha.a.Paragraph,null,"".concat(r.substring(0,80),"...")))))),n.a.createElement(Zt.a,null))}}]),t}(r.Component),Va=Object(Fa.a)(Ha),Wa=function(e){function t(){return Object(Yt.a)(this,t),Object(Ht.a)(this,Object(Vt.a)(t).apply(this,arguments))}return Object(Wt.a)(t,e),Object(Ft.a)(t,[{key:"render",value:function(){var e=this.props.searchResults;return n.a.createElement("div",null,e.length>0?n.a.createElement("div",null,n.a.createElement(ba.a,{itemLayout:"vertical",size:"large",pagination:{onChange:function(e){console.log(e)},pageSize:2,hideOnSinglePage:!0,style:{marginTop:0,marginBottom:20}},dataSource:e,renderItem:function(e){return n.a.createElement(Va,{item:e})}})):n.a.createElement("div",null,n.a.createElement(ha.a,{align:"center"},"Your search results will appear here.")))}}]),t}(r.Component),za=Object(s.b)(function(e){return{searchResults:e.searchResults}})(Wa),qa=function(e){function t(){return Object(Yt.a)(this,t),Object(Ht.a)(this,Object(Vt.a)(t).apply(this,arguments))}return Object(Wt.a)(t,e),Object(Ft.a)(t,[{key:"render",value:function(){return n.a.createElement("div",null,n.a.createElement(aa.a,{type:"flex",justify:"center"},n.a.createElement(ra.a,{span:24},n.a.createElement(Ea,{headerText:"Browse Stories"})),n.a.createElement(ra.a,{span:18},n.a.createElement(Ya,null)),n.a.createElement(ra.a,{span:24},n.a.createElement(za,null))))}}]),t}(r.Component),Ka=a(188),Ja=(a(175),function(e){function t(){var e,a;Object(Yt.a)(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(a=Object(Ht.a)(this,(e=Object(Vt.a)(t)).call.apply(e,[this].concat(n)))).state={visible:!1,file:null,confirmLoading:!1},a.showModal=function(){a.setState({visible:!0})},a.handleOk=function(e){console.log(e),a.submitFile(),a.setState({confirmLoading:!0}),setTimeout(function(){a.setState({visible:!1,file:null,confirmLoading:!1})},2e3)},a.handleCancel=function(e){console.log(e),a.setState({visible:!1})},a.submitFile=function(e){var t=new FormData;t.append("file",a.state.file);var r={type:"ADD_IMAGE_AWS",nextType:"ADD_IMAGE_".concat(a.props.photoDetails.typeOfPhoto),payload:t,id:a.props.user.userInfo.id,chapterId:a.props.photoDetails.chapterId,storyId:a.props.photoDetails.storyId};a.props.dispatch(r)},a.handleFileUpload=function(e){a.setState({file:e.target.files[0]})},a}return Object(Wt.a)(t,e),Object(Ft.a)(t,[{key:"render",value:function(){var e,t=this.props.photoDetails,a=t.buttonName,r=t.title,o=this.state,c=o.visible,i=o.confirmLoading,s=o.file;this.props.editMode&&(e="edit-button");var l=s;return null!==this.state.file&&(l=URL.createObjectURL(s)),n.a.createElement("div",null,n.a.createElement(ea.a,{type:"default",onClick:this.showModal,className:e,style:{width:"100%"}},a),n.a.createElement(Ra.a,{title:r,style:{top:20},visible:c,onOk:this.handleOk,okText:"Save Photo",onCancel:this.handleCancel,confirmLoading:i},n.a.createElement(aa.a,{type:"flex",justify:"center"},n.a.createElement(ra.a,null,n.a.createElement(ja.a,{type:"file",accept:"image/*",onChange:this.handleFileUpload})),n.a.createElement(ra.a,{style:{marginTop:10}},n.a.createElement(va.a,{shape:"square",size:100,icon:"picture",src:l})))))}}]),t}(r.Component)),Xa=Object(s.b)(function(e){return{user:e.user}})(Ja),Qa=function(e){function t(){var e,a;Object(Yt.a)(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(a=Object(Ht.a)(this,(e=Object(Vt.a)(t)).call.apply(e,[this].concat(n)))).state={modalVisible:!1,editedValue:null},a.handleModalBtn=function(e,t){a.setState({modalVisible:e})},a.handleEdit=function(e){a.setState({editedValue:e.target.value})},a.handleSubmit=function(){var e=a.state.editedValue,t=a.props,r=t.name,n=t.id,o=t.type;if(null!==e)switch(o){case"Chapter":a.props.dispatch({type:"EDIT_CHAPTER",payload:{id:n,colName:r,updatedValue:e}});break;case"Story":a.props.dispatch({type:"EDIT_STORY",payload:{id:n,colName:r,updatedValue:e}})}return a.setState({modalVisible:!1})},a}return Object(Wt.a)(t,e),Object(Ft.a)(t,[{key:"render",value:function(){var e=this,t=this.state.editedValue,a=this.props,r=a.valueToEdit,o=a.name,c=a.type;return n.a.createElement("div",null,n.a.createElement(ea.a,{type:"default",icon:"edit",onClick:this.handleModalBtn.bind(this,!0),className:"edit-button"},"".concat(o)),n.a.createElement(Ra.a,{title:"Editing ".concat(c," ").concat(o),style:{top:20},visible:this.state.modalVisible,onOk:this.handleSubmit,okText:"Save Edit",onCancel:function(){return e.handleModalBtn(!1)}},n.a.createElement(ja.a.TextArea,{value:null===t?r:t,onChange:this.handleEdit,style:{minHeight:100}})))}}]),t}(r.Component),Za=Object(s.b)()(Qa),$a=Ra.a.confirm,er=function(e){function t(){var e,a;Object(Yt.a)(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(a=Object(Ht.a)(this,(e=Object(Vt.a)(t)).call.apply(e,[this].concat(n)))).handlePostStory=function(){console.log("post story clicked");var e=a.props,t=e.dispatch,r=e.summary;$a({title:"Are you done editing and ready to complete this story?",content:"Please review the story summary, chapter contents, and photos before completing the story.",okText:"Complete Story",okType:"danger",okButtonProps:{type:"danger"},cancelText:"Keep Editing",onOk:function(){t({type:"COMPLETE_STORY",payload:r.id})},onCancel:function(){console.log("Cancel")}})},a}return Object(Wt.a)(t,e),Object(Ft.a)(t,[{key:"render",value:function(){var e=this.props,t=e.user,a=e.summary;return n.a.createElement("div",null,t.id===a.author_id&&!1===a.completed&&n.a.createElement(aa.a,{type:"flex",justify:"center"},n.a.createElement(ra.a,{span:18},n.a.createElement(ea.a,{type:"primary",onClick:this.handlePostStory,style:{width:"100%",margin:"20px 0"}},"Finalize Story"))))}}]),t}(r.Component),tr=Object(s.b)(function(e){return{user:e.user.userInfo,summary:e.storyDetail.summary[0]}})(er),ar=a(379),rr=a(195),nr=function(e){function t(){var e,a;Object(Yt.a)(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(a=Object(Ht.a)(this,(e=Object(Vt.a)(t)).call.apply(e,[this].concat(n)))).turnPage=function(e,t){a.props.history.push("".concat(e-1))},a.handleReturn=function(){a.props.history.push("/existing-story/".concat(a.props.summary[0].id))},a}return Object(Wt.a)(t,e),Object(Ft.a)(t,[{key:"render",value:function(){var e=this.props,t=e.summary,a=e.chapter,r=e.contributor,o=e.editMode,c=this.props.match.params.chapterId;console.log(c,a);var i=r.length,s="";0===i?s="":1===i?s=" and one contributor":i<2&&(s=" and ".concat(i," contributors"));var l=a[c];return console.log("currChapter",l),n.a.createElement("div",null,n.a.createElement(aa.a,{type:"flex",justify:"space-around",align:"middle"},n.a.createElement(ra.a,{span:24},n.a.createElement(Ea,{headerText:"Chapter Details"}))),void 0!==l&&t.length>0?n.a.createElement("div",null,n.a.createElement(aa.a,{type:"flex",justify:"space-around",align:"middle"},n.a.createElement(ar.a,{title:"Chapter ".concat(l.order,": ").concat(l.title),subTitle:'in story "'.concat(t[0].title,'" by ').concat(t[0].author_name).concat(s,". ")}),o&&n.a.createElement(ra.a,{style:{marginBottom:20}},n.a.createElement(Za,{valueToEdit:l.title,type:"Chapter",name:"Title",id:l.id}))),n.a.createElement($t.a,{style:{width:300,display:"block",margin:"auto",marginBottom:10},cover:n.a.createElement("img",{alt:"Chapter ".concat(c," header"),src:l.chapter_photo})},n.a.createElement($t.a.Meta,{description:l.text})),o&&n.a.createElement(aa.a,{type:"flex",justify:"space-around",style:{marginBottom:20}},n.a.createElement(ra.a,null,n.a.createElement(Za,{valueToEdit:l.text,type:"Chapter",name:"Text",id:l.id})),n.a.createElement(ra.a,null,n.a.createElement(Xa,{photoDetails:{typeOfPhoto:"CHAPTER",title:"Changing Chapter ".concat(l.order," Photo"),chapterId:l.id,buttonName:"Change Photo"},editMode:o}))),n.a.createElement(aa.a,{type:"flex",justify:"center",align:"middle"},n.a.createElement(rr.a,{defaultCurrent:l.order,pageSize:1,total:Number(a.length),onChange:this.turnPage,hideOnSinglePage:!0}),n.a.createElement(ra.a,{span:18},n.a.createElement(ea.a,{onClick:this.handleReturn,style:{marginTop:10,marginBottom:10,display:"block",width:"100%"}},"Return To Summary"))),n.a.createElement(tr,null)):n.a.createElement("p",null," Page is loading."))}}]),t}(r.Component),or=Object(Ka.a)(nr),cr=Object(s.b)()(or),ir=a(388),sr=a(389),lr=ir.a.Option,pr=function(e){function t(){var e,a;Object(Yt.a)(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(a=Object(Ht.a)(this,(e=Object(Vt.a)(t)).call.apply(e,[this].concat(n)))).state={person:{},alert:!1},a.handleSearch=function(e){e.length>1&&a.props.dispatch({type:"GET_EMPLOYEES",payload:e})},a.onChange=function(e){a.setState({person:a.props.employeeResults[e]})},a.handleClick=function(){var e=a.props.pendingContributors.filter(function(e){return e.person_id===a.state.person.person_id});if(void 0===a.state.person.first_name)return null;e.length>0?(a.setState({alert:!0}),setTimeout(function(){a.setState({alert:!1})},2e3)):(a.props.dispatch({type:"ADD_PENDING_CONTRIBUTORS",payload:a.state.person}),a.props.dispatch({type:"CLEAR_EMPLOYEE_RESULTS"}))},a}return Object(Wt.a)(t,e),Object(Ft.a)(t,[{key:"render",value:function(){var e=this.props.employeeResults.map(function(e,t){return n.a.createElement(lr,{key:t},"".concat(e.first_name," ").concat(e.last_name))});return n.a.createElement("div",null,this.state.alert?n.a.createElement("div",null,n.a.createElement(sr.a,{message:"User is already a contributor",type:"warning",showIcon:!0})):null,n.a.createElement(ir.a,{style:{width:"100%"},onSearch:this.handleSearch,onChange:this.onChange,defaultValue:"",placeholder:"begin typing name",dataSource:e},n.a.createElement(ja.a,{addonAfter:n.a.createElement(xa.a,{type:"user-add",onClick:this.handleClick})})))}}]),t}(r.Component),ur=Object(s.b)(function(e){return{employeeResults:e.contributor.employeeResults,pendingContributors:e.contributor.pending}})(pr),dr=function(e){function t(){var e,a;Object(Yt.a)(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(a=Object(Ht.a)(this,(e=Object(Vt.a)(t)).call.apply(e,[this].concat(n)))).handleClick=function(){a.props.dispatch({type:"REMOVE_PENDING_CONTRIBUTOR",payload:a.props.item})},a}return Object(Wt.a)(t,e),Object(Ft.a)(t,[{key:"render",value:function(){var e,t=this.props,a=t.item;return t.editMode&&(e=this.handleClick),n.a.createElement(ba.a.Item,{onClick:e},n.a.createElement(ba.a.Item.Meta,{avatar:n.a.createElement(va.a,{src:"".concat(a.profile_pic)}),title:"".concat(a.first_name," ").concat(a.last_name)}))}}]),t}(r.Component),hr=Object(s.b)()(dr),mr=function(e){function t(){return Object(Yt.a)(this,t),Object(Ht.a)(this,Object(Vt.a)(t).apply(this,arguments))}return Object(Wt.a)(t,e),Object(Ft.a)(t,[{key:"render",value:function(){var e=this.props,t=e.pendingContributors,a=e.storyContributors,r=e.editMode,o=t;return void 0!==r&&(o=[].concat(Object(S.a)(a),Object(S.a)(t))),n.a.createElement("div",null,n.a.createElement(ha.a,{align:"center"},"Click contributor to remove them."),t&&n.a.createElement(ba.a,{itemLayout:"horizontal",dataSource:o,renderItem:function(e){return n.a.createElement(hr,{item:e,editMode:r})}}))}}]),t}(r.Component),Er=Object(s.b)(function(e){return{pendingContributors:e.contributor.pending,storyContributors:e.storyDetail.contributor}})(mr),yr=function(e){function t(){var e,a;Object(Yt.a)(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(a=Object(Ht.a)(this,(e=Object(Vt.a)(t)).call.apply(e,[this].concat(n)))).state={loading:!1,visible:!1},a.showModal=function(){a.setState({visible:!0})},a.handleCancel=function(){a.props.dispatch({type:"RESET_PENDING_CONTRIBUTOR"}),a.setState({visible:!1})},a.handleInvite=function(){var e={story_id:a.props.story_id,pendingContributor:a.props.pendingContributor};a.props.dispatch({type:"ADD_CONTRIBUTOR",payload:e}),a.setState({visible:!1})},a}return Object(Wt.a)(t,e),Object(Ft.a)(t,[{key:"render",value:function(){var e=this.state,t=e.visible,a=e.loading,r=this.props.editMode,o=[],c="View Contributors",i="Story Contributors";return r&&(c="Add Contributors",i="Inviting Contributors to Story",o.push(n.a.createElement(ea.a,{key:"back",onClick:this.handleCancel},"Cancel")),o.push(n.a.createElement(ea.a,{key:"submit",type:"primary",loading:a,onClick:this.handleInvite,icon:"usergroup-add"},"Send Invites"))),n.a.createElement("div",null,n.a.createElement(ea.a,{onClick:this.showModal,className:"edit-button"},c),n.a.createElement(Ra.a,{visible:t,title:i,onOk:this.handleOk,onCancel:this.handleCancel,footer:o},!0===r&&n.a.createElement(ur,null),n.a.createElement(Er,{editMode:r})))}}]),t}(r.Component),fr=Object(s.b)(function(e){return{pendingContributor:e.contributor.pending}})(yr),br=function(e){function t(e){var a;return Object(Yt.a)(this,t),(a=Object(Ht.a)(this,Object(Vt.a)(t).call(this,e))).openChapterModal=function(){a.setState({visible:!0})},a.onInputChange=function(e){var t=e.target,r=t.name,n=t.value;a.setState(Object(Sa.a)({},r,n))},a.addChapter=function(){var e=a.props.chapter.length+1,t=[];t.push({title:a.state.title,text:"This is a newly made chapter.",order:e,chapter_photo:"/images/placeholder.png",disabled:!0});var r={chapter:t,storyId:a.props.storyId};a.props.dispatch({type:"ADD_EXISTING_STORY_CHAPTER",payload:r}),a.setState(a.baseState)},a.cancelEntry=function(){a.setState({visible:!1})},a.state={title:"",visible:!1},a.baseState=a.state,a}return Object(Wt.a)(t,e),Object(Ft.a)(t,[{key:"render",value:function(){return n.a.createElement("div",null,n.a.createElement(ea.a,{onClick:this.openChapterModal,className:"edit-button"},"Add Chapter"),n.a.createElement(Ra.a,{title:"New chapter title",visible:this.state.visible,onOk:this.addChapter,okText:"Add Chapter",onCancel:this.cancelEntry,keyboard:!0},n.a.createElement(ja.a,{placeholder:"next chapter",name:"title",value:this.state.title,onChange:this.onInputChange,allowClear:!0})))}}]),t}(r.Component),vr=Object(s.b)()(br),gr=ha.a.Title,Or=function(e){function t(){var e,a;Object(Yt.a)(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(a=Object(Ht.a)(this,(e=Object(Vt.a)(t)).call.apply(e,[this].concat(n)))).readChapter=function(e){a.props.history.push("/existing-story/".concat(e.story_id,"/chapter/").concat(e.id))},a}return Object(Wt.a)(t,e),Object(Ft.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.chapter,r=t.storyId,o=t.editMode;return n.a.createElement("div",null,(o||a.length>0)&&n.a.createElement("div",null,n.a.createElement(Zt.a,{style:{marginTop:30,marginBottom:0}},n.a.createElement(gr,{level:4,style:{textAlign:"center"}},"Chapters")),n.a.createElement(aa.a,{type:"flex",align:"middle",justify:"center"},o&&n.a.createElement(ra.a,null,n.a.createElement(vr,{chapter:a,storyId:r})))),a.length>0?n.a.createElement(aa.a,{type:"flex",align:"middle",justify:"center"},n.a.createElement(ra.a,{span:18},n.a.createElement(ba.a,{itemLayout:"vertical",size:"large",pagination:{pageSize:3},dataSource:this.props.chapter,renderItem:function(t){var a=t.chapter_photo,r=t.title,o=t.text,c="";null!==o&&(c=o.substring(0,40)+"...");var i="./images/placeholder.png";return null!==a&&(i=a),n.a.createElement(ba.a.Item,{key:r},n.a.createElement(ba.a.Item.Meta,{avatar:n.a.createElement(qt.a,{to:"".concat(e.props.match.url,"/chapter/").concat(e.props.chapter.indexOf(t))},n.a.createElement(va.a,{src:i,shape:"square",size:64})),title:n.a.createElement(qt.a,{to:"".concat(e.props.match.url,"/chapter/").concat(e.props.chapter.indexOf(t))},r),description:n.a.createElement(qt.a,{to:"".concat(e.props.match.url,"/chapter/").concat(e.props.chapter.indexOf(t))},c)}))}}))):null)}}]),t}(r.Component),Tr=Object(Ka.a)(Or),_r=Object(s.b)()(Tr),Sr=$t.a.Meta,jr=ha.a.Title,xr=ha.a.Paragraph,Rr=function(e){function t(){return Object(Yt.a)(this,t),Object(Ht.a)(this,Object(Vt.a)(t).apply(this,arguments))}return Object(Wt.a)(t,e),Object(Ft.a)(t,[{key:"render",value:function(){var e,t=this.props,a=t.summary,r=t.chapter,o=t.contributor,c=t.editMode,i=a[0],s=i.title,l=i.author_name,p=i.id,u=i.header_photo,d=i.caption,h=i.intro,m=o.length;return 0===m?e="":1===m?e=" and ".concat(o[0].first_name," ").concat(o[0].last_name):m>1&&(e=" and ".concat(m," contributors")),n.a.createElement("div",null,n.a.createElement(aa.a,{type:"flex",justify:"space-around",align:"middle"},n.a.createElement(ra.a,{span:24},n.a.createElement(Ea,{headerText:"Story Summary"}))),this.props.summary.length>0&&n.a.createElement("div",null,n.a.createElement(aa.a,{type:"flex",justify:"space-around",align:"middle"},n.a.createElement(ar.a,{title:s,subTitle:"By ".concat(l).concat(e)}),c&&n.a.createElement(ra.a,{span:8,style:{marginBottom:20}},n.a.createElement(Za,{valueToEdit:s,type:"Story",name:"Title",id:p})),c&&n.a.createElement(ra.a,{span:12,style:{marginBottom:20}},n.a.createElement(fr,{editMode:c,story_id:p}))),n.a.createElement($t.a,{style:{width:300,display:"block",margin:"auto",marginBottom:10},cover:n.a.createElement("img",{alt:"story book cover",src:u})},n.a.createElement(Sr,{description:d})),c&&n.a.createElement(aa.a,{type:"flex",justify:"space-around",align:"middle"},n.a.createElement(ra.a,{span:6},n.a.createElement(Za,{valueToEdit:d,type:"Story",name:"Caption",id:p})),n.a.createElement(ra.a,{span:10},n.a.createElement(Xa,{photoDetails:{typeOfPhoto:"EDIT_STORY_IMAGE",title:"Changing Story Photo",storyId:p,buttonName:"Change Photo"},editMode:c}))),n.a.createElement(aa.a,{type:"flex",justify:"center"},n.a.createElement(Zt.a,null,n.a.createElement(jr,{level:4,style:{textAlign:"center",marginTop:10}},"Introduction")),null!==h?n.a.createElement(ra.a,{span:18},n.a.createElement(xr,null,h)):n.a.createElement(ra.a,{span:18},n.a.createElement(xr,null," This story has no introduction yet! ")),c&&n.a.createElement(ra.a,{span:18},n.a.createElement(Za,{valueToEdit:h,type:"Story",name:"Intro",id:p})))),r&&n.a.createElement(_r,{chapter:r,storyId:a[0].id,editMode:c}),n.a.createElement(tr,null))}}]),t}(r.Component),Cr=Object(s.b)(function(e){return{user:e.user.userInfo}})(Rr),Ir=function(e){function t(){var e,a;Object(Yt.a)(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(a=Object(Ht.a)(this,(e=Object(Vt.a)(t)).call.apply(e,[this].concat(n)))).state={editMode:!1},a}return Object(Wt.a)(t,e),Object(Ft.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.match.params.id;this.props.dispatch({type:"GET_INDIVIDUAL_STORY",payload:e}),this.props.dispatch({type:"GET_STORY_CHAPTER_DETAIL",payload:e}),this.props.dispatch({type:"GET_STORY_CONTRIBUTORS",payload:e})}},{key:"render",value:function(){var e=this.props.storyDetail,t=e.summary,a=e.chapter,r=e.contributor,o=this.state.editMode,c=this.props.match.params.chapterId;return n.a.createElement("div",null,t.length>0&&isNaN(c)&&n.a.createElement(Cr,{summary:t,chapter:a,editMode:o,contributor:r}),a.length>0&&!0!==isNaN(c)&&n.a.createElement(cr,{summary:t,chapter:a,contributor:r,key:c,editMode:o}))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var a=e.storyDetail,r=a.contributor,n=a.summary,o=e.user,c=!1;return n.length>0&&(c=n[0].author_id===o.id,n[0].completed)?{editMode:!1}:r.filter(function(e){return e.id===o.id}).length>0||c?{editMode:!0}:null}}]),t}(r.Component),kr=Object(s.b)(function(e){return{storyDetail:e.storyDetail,user:e.user.userInfo}})(Ir),wr=a(377),Nr=function(e){function t(){var e,a;Object(Yt.a)(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(a=Object(Ht.a)(this,(e=Object(Vt.a)(t)).call.apply(e,[this].concat(n)))).handleChange=function(e){"initial"===e?a.props.dispatch({type:"SET_TEMPLATE_NEW_CREATE"}):a.props.dispatch({type:"GET_TEMPLATE_DETAILS",payload:e})},a}return Object(Wt.a)(t,e),Object(Ft.a)(t,[{key:"componentDidMount",value:function(){this.props.dispatch({type:"GET_TEMPLATE_STORY"})}},{key:"render",value:function(){return n.a.createElement(wr.a.Item,{label:"Create a story or choose a template"},n.a.createElement(Ga.a,{defaultValue:"Please select",style:{width:"100%"},id:"storyType",onChange:this.handleChange},n.a.createElement(Ga.a.Option,{value:"initial"},"Build Your Own Story"),this.props.template.map(function(e,t){return n.a.createElement(Ga.a.Option,{key:t,value:e.id},e.name)})))}}]),t}(r.Component),Ar=Object(s.b)(function(e){return{template:e.template.templateReducer}})(Nr),Dr=(a(143),a(382)),Lr=function(e){function t(){return Object(Yt.a)(this,t),Object(Ht.a)(this,Object(Vt.a)(t).apply(this,arguments))}return Object(Wt.a)(t,e),Object(Ft.a)(t,[{key:"render",value:function(){return n.a.createElement(Dr.a,{current:Number(this.props.current),size:"small"},n.a.createElement(Dr.a.Step,{title:"New or Template"}),n.a.createElement(Dr.a.Step,{title:"Story Details"}),n.a.createElement(Dr.a.Step,{title:"Chapters"}),n.a.createElement(Dr.a.Step,{title:"Contributors"}))}}]),t}(r.Component),Pr=function(e){function t(){var e,a;Object(Yt.a)(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(a=Object(Ht.a)(this,(e=Object(Vt.a)(t)).call.apply(e,[this].concat(n)))).nextPage=function(e){e.preventDefault(),a.props.history.push("/choose-template/detail/")},a.cancelStory=function(){a.props.history.push("/home")},a}return Object(Wt.a)(t,e),Object(Ft.a)(t,[{key:"render",value:function(){var e=this.props.template;return n.a.createElement("div",null,n.a.createElement(aa.a,{type:"flex",align:"middle",justify:"center"},n.a.createElement(ra.a,{span:24},n.a.createElement(Ea,{headerText:"Create a Story"})),n.a.createElement(ra.a,{span:18},n.a.createElement(Lr,{current:0})),n.a.createElement(ra.a,{span:18},n.a.createElement(wr.a,{layout:"vertical",onSubmit:this.nextPage},n.a.createElement(aa.a,{type:"flex",justify:"space-between"},n.a.createElement(ra.a,{span:24},n.a.createElement(Ar,null)),n.a.createElement(ra.a,{span:9},n.a.createElement(ea.a,{className:"create-story-nav-btn",onClick:this.cancelStory},"Cancel")),n.a.createElement(ra.a,{span:9},n.a.createElement(ea.a,{className:"create-story-nav-btn",type:"primary",htmlType:"submit",disabled:""===e.name},"Next",n.a.createElement(xa.a,{type:"right"}))))))))}}]),t}(r.Component),Mr=Object(s.b)(function(e){return{template:e.template.templateNewStoryReducer}})(Pr),Ur=function(e){function t(){var e,a;Object(Yt.a)(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(a=Object(Ht.a)(this,(e=Object(Vt.a)(t)).call.apply(e,[this].concat(n)))).previousButton=function(){a.props.history.push("/choose-template/")},a.hasErrors=function(e){return Object.keys(e).some(function(t){return e[t]})},a.createStory=function(e){e.preventDefault(),a.props.form.validateFieldsAndScroll(function(e,t){if(!e){var r="";r="initial"!==a.props.template.title?{title:t.title,header_photo:a.props.image.storyImage,caption:t.caption,intro:t.intro,is_template:!0}:{title:t.title,header_photo:a.props.image.storyImage,caption:t.caption,intro:t.intro,is_template:!1},a.props.dispatch({type:"SET_NEW_STORY",payload:r}),a.props.history.push("/choose-template/chapter/"),a.props.form.resetFields()}})},a}return Object(Wt.a)(t,e),Object(Ft.a)(t,[{key:"render",value:function(){var e=this.props,t=e.story,a=e.image,r=e.template,o=this.props.form,c=o.getFieldDecorator,i=o.getFieldsError;return n.a.createElement("div",null,n.a.createElement(aa.a,{type:"flex",align:"middle",justify:"center"},n.a.createElement(ra.a,{span:24},n.a.createElement(Ea,{headerText:"Fill Out Story Details"})),n.a.createElement(ra.a,{span:18},n.a.createElement(Lr,{current:1})),n.a.createElement(ra.a,{span:18},n.a.createElement(wr.a,{layout:"vertical",onSubmit:this.createStory},n.a.createElement(aa.a,{type:"flex",justify:"space-between",style:{marginBottom:20}},n.a.createElement(ra.a,{span:24},n.a.createElement(wr.a.Item,{label:"Story title"},c("title",{initialValue:""!==t.title?t.title:r.title,rules:[{required:!0,message:"Please enter a story title!"}]})(n.a.createElement(ja.a,{allowClear:!0,placeholder:"Story title"})))),n.a.createElement(ra.a,{span:24},n.a.createElement(wr.a.Item,{label:"Story intro"},c("intro",{initialValue:""!==t.intro?t.intro:r.intro,rules:[{required:!0,message:"Please enter an intro!"}]})(n.a.createElement(ja.a,{allowClear:!0,placeholder:"Enter an introduction"})))),n.a.createElement(ra.a,{span:24},n.a.createElement(wr.a.Item,{label:"Upload Story Photo"},c("header_photo",{initialValue:""!==r.placeholder_image?r.placeholder_image:a.storyImage})(n.a.createElement("div",null,n.a.createElement(va.a,{shape:"square",size:150,icon:"picture",src:""!==r.placeholder_image?r.placeholder_image:a.storyImage,style:{display:"block",margin:"auto",marginBottom:10}}),n.a.createElement(Xa,{photoDetails:{typeOfPhoto:"STORY",title:"Adding Photo for New Story",buttonName:"Add Story Photo"}}))))),n.a.createElement(ra.a,{span:24},n.a.createElement(wr.a.Item,{label:"Photo caption"},c("caption",{initialValue:""!==t.caption?t.caption:r.caption})(n.a.createElement(ja.a,{allowClear:!0,placeholder:"Add a caption for your picture"})))),n.a.createElement(ra.a,{span:9},n.a.createElement(ea.a,{onClick:this.previousButton,className:"create-story-nav-btn"},n.a.createElement(xa.a,{type:"left"}),"Previous")),n.a.createElement(ra.a,{span:9},n.a.createElement(ea.a,{type:"primary",htmlType:"submit",className:"create-story-nav-btn",disabled:this.hasErrors(i())},"Next",n.a.createElement(xa.a,{type:"right"}))))))))}}]),t}(r.Component),Gr=wr.a.create()(Ur),Br=Object(s.b)(function(e){return{story:e.story.newStoryReducer,image:e.story.imageReducer,template:e.template.templateNewStoryReducer}})(Gr),Yr=0,Fr=function(e){function t(){var e,a;Object(Yt.a)(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(a=Object(Ht.a)(this,(e=Object(Vt.a)(t)).call.apply(e,[this].concat(n)))).removeChapter=function(e){var t=a.props.form,r=t.getFieldValue("keys");t.setFieldsValue({keys:r.filter(function(t){return t!==e})})},a.addChapter=function(){var e=a.props.form,t=e.getFieldValue("keys").concat(Yr++);e.setFieldsValue({keys:t})},a.previousButton=function(){a.props.history.push("/choose-template/detail/")},a.nextPage=function(e){e.preventDefault(),a.props.form.validateFieldsAndScroll(function(e,t){if(e)console.log("Error: ",t);else{if(t.keys.length>0){var r={type:"SET_NEW_STORY_CHAPTER",payload:t.title.filter(function(e){return{title:e}}).map(function(e){return{title:e,text:"",chapter_photo:"/images/placeholder.png"}})};a.props.dispatch(r)}a.props.history.push("/choose-template/contributor/")}})},a}return Object(Wt.a)(t,e),Object(Ft.a)(t,[{key:"render",value:function(){var e=this,t=this.props.template,a=this.props.form,r=a.getFieldDecorator,o=a.getFieldValue,c=t.length>0?t.map(function(e,t){return t}):[],i=t.length>0;r("keys",{initialValue:c});var s=o("keys"),l=s.map(function(a,o){return n.a.createElement(ra.a,{span:24,key:o},n.a.createElement(wr.a.Item,{label:"Chapter ".concat(o+1),extra:i&&a>=0&&a<=t.length-1?t[a].text:"",required:!0},r("title[".concat(a,"]"),{initialValue:i&&a>=0&&a<=t.length-1?t[a].title:"",validateTrigger:["onChange","onBlur"],rules:[{required:!0,whitespace:!0,message:"Please enter a chapter title or delete."}]})(n.a.createElement(ja.a,{style:{width:"100%"},addonAfter:n.a.createElement(xa.a,{className:"dynamic-delete-button",type:"minus-circle-o",disabled:1===s.length,onClick:function(){return e.removeChapter(a)}})}))))});return n.a.createElement("div",null,n.a.createElement(aa.a,{type:"flex",align:"middle",justify:"center"},n.a.createElement(ra.a,{span:24},n.a.createElement(Ea,{headerText:"Add Chapters"})),n.a.createElement(ra.a,{span:18},n.a.createElement(Lr,{current:2})),n.a.createElement(ra.a,{span:18},n.a.createElement(wr.a,{layout:"vertical",onSubmit:this.nextPage},n.a.createElement(aa.a,{type:"flex",justify:"space-between",style:{marginBottom:20}},l,n.a.createElement(ra.a,{span:24},n.a.createElement(wr.a.Item,null,n.a.createElement(ea.a,{type:"dashed",onClick:this.addChapter,style:{width:"100%"}},n.a.createElement(xa.a,{type:"plus"}),"Add another chapter"))),n.a.createElement(ra.a,{span:9},n.a.createElement(ea.a,{onClick:this.previousButton,className:"create-story-nav-btn"},n.a.createElement(xa.a,{type:"left"}),"Previous")),n.a.createElement(ra.a,{span:9},n.a.createElement(ea.a,{type:"primary",htmlType:"submit",className:"create-story-nav-btn"},"Next",n.a.createElement(xa.a,{type:"right"}))))))))}}]),t}(r.Component),Hr=wr.a.create()(Fr),Vr=Object(s.b)(function(e){return{template:e.template.templateNewChapterReducer}})(Hr),Wr=function(e){function t(){var e,a;Object(Yt.a)(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(a=Object(Ht.a)(this,(e=Object(Vt.a)(t)).call.apply(e,[this].concat(n)))).previousButton=function(){a.props.history.push("/choose-template/chapter/")},a.createStory=function(e){e.preventDefault(),a.props.form.validateFieldsAndScroll(function(e,t){if(!e){var r={story:a.props.story,chapter:a.props.chapter,contributor:a.props.contributor};a.props.dispatch({type:"POST_NEW_STORY",payload:r}),a.props.form.resetFields(),a.props.history.push("/home")}})},a}return Object(Wt.a)(t,e),Object(Ft.a)(t,[{key:"render",value:function(){var e=this.props.contributor;return n.a.createElement("div",null,n.a.createElement(aa.a,{type:"flex",align:"middle",justify:"center"},n.a.createElement(ra.a,{span:24},n.a.createElement(Ea,{headerText:"Add Contributors"})),n.a.createElement(ra.a,{span:18},n.a.createElement(Lr,{current:3})),n.a.createElement(ra.a,{span:18},n.a.createElement(wr.a,{layout:"vertical",onSubmit:this.createStory},n.a.createElement(aa.a,{type:"flex",justify:"space-between",style:{marginBottom:20}},n.a.createElement(ra.a,{span:24},n.a.createElement(wr.a.Item,{label:"Add contributors"},n.a.createElement(ur,null))),n.a.createElement(ra.a,{span:24,style:{marginBottom:20}},0!==e.length?n.a.createElement(Er,{editMode:"true"}):n.a.createElement(ha.a,{align:"center"},"Contributors will show up here as you add them.")),n.a.createElement(ra.a,{span:9},n.a.createElement(ea.a,{onClick:this.previousButton,className:"create-story-nav-btn"},n.a.createElement(xa.a,{type:"left"}),"Previous")),n.a.createElement(ra.a,{span:9},n.a.createElement(ea.a,{type:"primary",htmlType:"submit",className:"create-story-nav-btn"},"Create Story")))))))}}]),t}(r.Component),zr=wr.a.create()(Wr),qr=Object(s.b)(function(e){return{story:e.story.newStoryReducer,chapter:e.chapter.newStoryChapterReducer,contributor:e.contributor.pending}})(zr),Kr=a(376),Jr=ha.a.Text,Xr=function(e){function t(){return Object(Yt.a)(this,t),Object(Ht.a)(this,Object(Vt.a)(t).apply(this,arguments))}return Object(Wt.a)(t,e),Object(Ft.a)(t,[{key:"render",value:function(){var e=this,t=this.props.routeObj,a=t.route,r=t.name,o=t.iconType,c=this.props.handleSideBar.bind(this,!1);"Log Out"===r&&(c=function(){return e.props.dispatch({type:"LOGOUT"})});var i={color:"inherit",fontSize:"16px"};return n.a.createElement(Kr.a,{exact:!0,to:a,onClick:c,activeClassName:"nav-link-active",className:"nav-link-default"},n.a.createElement("div",{className:"nav-link-div"},"Notifications"===r?n.a.createElement(ta.a,{count:this.props.notificationCount},n.a.createElement(Jr,{style:i},n.a.createElement(xa.a,{type:o,style:i})," \xa0 ",r)):n.a.createElement(Jr,{style:i},n.a.createElement(xa.a,{type:o,style:i})," \xa0 ",r)))}}]),t}(r.Component),Qr=Object(s.b)(function(e){return{invite:e.notification.invite}})(Xr),Zr=a(384),$r=(a(144),ha.a.Title),en=function(e){function t(){var e,a;Object(Yt.a)(this,t);for(var r=arguments.length,o=new Array(r),c=0;c<r;c++)o[c]=arguments[c];return(a=Object(Ht.a)(this,(e=Object(Vt.a)(t)).call.apply(e,[this].concat(o)))).buildLinks=function(){return[{route:"/home",name:"Home",iconType:"home"},{route:"/notification",name:"Notifications",iconType:"bell"},{route:"/choose-template",name:"Begin Story",iconType:"plus-square"},{route:"/search",name:"Browse Stories",iconType:"search"},{route:"/",name:"Log Out",iconType:"logout"}].map(function(e,t){return n.a.createElement(Qr,{routeObj:e,notificationCount:a.props.invite.length,handleSideBar:a.props.handleSideBar,key:t})})},a}return Object(Wt.a)(t,e),Object(Ft.a)(t,[{key:"render",value:function(){var e=this.props,t=e.userInfo,a=e.visible,r=e.handleSideBar,o="./images/placeholder.png";return null!==t.profile_pic&&(o=t.profile_pic),n.a.createElement(Zr.a,{width:300,placement:"left",closable:!0,onClose:r.bind(this,!1),visible:a},n.a.createElement("img",{src:"./images/kevinslogos/JourneyTellr-Logo_icononly_Color-version.png",alt:"logo",height:"40",width:"40",className:"logo-icon-only"}),n.a.createElement(Zt.a,null),n.a.createElement(qt.a,{to:"/profile",onClick:r.bind(this,!1)},n.a.createElement($r,{level:4},n.a.createElement("img",{src:o,height:"60",alt:"placeholder"}),"\xa0\xa0",t.first_name,"\xa0",t.last_name)),n.a.createElement(Zt.a,null),this.buildLinks())}}]),t}(r.Component),tn=Object(s.b)(function(e){return{userInfo:e.user.userInfo,invite:e.notification.invite}})(en),an=a(193),rn=a(88),nn=a(194);rn.b.add(nn.a);var on=function(e){function t(){var e,a;Object(Yt.a)(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(a=Object(Ht.a)(this,(e=Object(Vt.a)(t)).call.apply(e,[this].concat(n)))).state={visible:!1},a.handleSideBar=function(e,t){a.setState({visible:e})},a}return Object(Wt.a)(t,e),Object(Ft.a)(t,[{key:"render",value:function(){return n.a.createElement("div",{className:"header-button-div"},n.a.createElement(an.a,{className:"drawer-btn",icon:"bars",size:"2x",onClick:this.handleSideBar.bind(this,!0),visible:toString(this.state.visible)}),this.state.visible&&n.a.createElement(tn,{handleSideBar:this.handleSideBar,visible:this.state.visible}))}}]),t}(r.Component),cn=a(198),sn=(a(367),function(e){function t(){var e,a;Object(Yt.a)(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(a=Object(Ht.a)(this,(e=Object(Vt.a)(t)).call.apply(e,[this].concat(n)))).state={email:"",password:""},a.login=function(e){e.preventDefault(),a.state.email&&a.state.password?a.props.dispatch({type:"LOGIN",payload:{email:a.state.email.toUpperCase(),password:a.state.password}}):a.props.dispatch({type:"LOGIN_INPUT_ERROR"})},a.handleInputChangeFor=function(e){a.setState(Object(Sa.a)({},e.target.id,e.target.value))},a.emitEmpty=function(){a.userNameInput.focus(),a.setState({email:""})},a.showLoginErrorMessage=function(){Qt.a.open({key:"loginMessage",message:"An Error Occurred When Logging In",description:a.props.errors.loginMessage,duration:4}),a.props.dispatch({type:"CLEAR_LOGIN_ERROR"})},a}return Object(Wt.a)(t,e),Object(Ft.a)(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.email,r=t.password,o=this.handleInputChangeFor,c=a?n.a.createElement(xa.a,{type:"close-circle",onClick:this.emitEmpty}):null;return n.a.createElement("div",null,this.props.errors.loginMessage&&this.showLoginErrorMessage(),n.a.createElement(aa.a,{type:"flex",align:"middle",justify:"center"},n.a.createElement(ra.a,{span:24},n.a.createElement(Ea,{headerText:"Log In"})),n.a.createElement(ra.a,{span:20},n.a.createElement("form",{onSubmit:this.login,className:"login-form"},n.a.createElement(aa.a,{type:"flex",justify:"center"},n.a.createElement(ra.a,{span:18,style:{margin:"10px 0px"}},n.a.createElement("label",{htmlFor:"email"},"Email:",n.a.createElement(ja.a,{placeholder:"Enter your email address",prefix:n.a.createElement(xa.a,{type:"user",style:{color:"rgba(0,0,0,.25)"}}),suffix:c,value:a,id:"email",onChange:o}))),n.a.createElement(ra.a,{span:18,style:{marginBottom:"10px"}},n.a.createElement("label",{htmlFor:"password"},"Password:",n.a.createElement(ja.a,{placeholder:"Enter your password",prefix:n.a.createElement(xa.a,{type:"lock",style:{color:"rgba(0,0,0,.25)"}}),type:"password",value:r,id:"password",onChange:o}))),n.a.createElement(ra.a,{span:18,style:{marginBottom:"10px"}},n.a.createElement(ea.a,{type:"primary",htmlType:"submit",style:{width:"100%"}},"Log In")))))),n.a.createElement(aa.a,null,n.a.createElement(ra.a,{style:{margin:"20px",float:"right"}},n.a.createElement(ea.a,{onClick:function(){e.props.dispatch({type:"SET_TO_REGISTER_MODE"})}},"Register"))))}}]),t}(r.Component)),ln=Object(s.b)(function(e){return{errors:e.errors}})(sn),pn=function(e){function t(){var e,a;Object(Yt.a)(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(a=Object(Ht.a)(this,(e=Object(Vt.a)(t)).call.apply(e,[this].concat(n)))).state={visible:!1,file:null,confirmLoading:!1,button:"default",buttonName:a.props.photoDetails.buttonName},a.showModal=function(){a.setState({visible:!0})},a.handleOk=function(e){console.log(e),a.submitFile(),a.setState({confirmLoading:!0,button:"primary",buttonName:"Profile Picture Added"}),setTimeout(function(){a.setState({visible:!1,file:null,confirmLoading:!1})},2e3)},a.handleCancel=function(e){console.log(e),a.setState({visible:!1})},a.submitFile=function(e){var t=new FormData;t.append("file",a.state.file);var r={type:"ADD_IMAGE_AWS",nextType:"ADD_IMAGE_".concat(a.props.photoDetails.typeOfPhoto),payload:t,id:a.props.user.userInfo.id,chapterId:a.props.photoDetails.chapterId,storyId:a.props.photoDetails.storyId};a.props.dispatch(r)},a.handleFileUpload=function(e){a.setState({file:e.target.files[0]})},a}return Object(Wt.a)(t,e),Object(Ft.a)(t,[{key:"render",value:function(){var e,t=this.props.photoDetails.title,a=this.state,r=a.visible,o=a.confirmLoading,c=a.file,i=a.button,s=a.buttonName;this.props.editMode&&(e="edit-button");var l=c;return null!==this.state.file&&(l=URL.createObjectURL(c)),n.a.createElement("div",null,n.a.createElement(ea.a,{type:i,onClick:this.showModal,className:e,style:{width:"100%"}},s),n.a.createElement(Ra.a,{title:t,style:{top:20},visible:r,onOk:this.handleOk,okText:"Save Photo",onCancel:this.handleCancel,confirmLoading:o},n.a.createElement(aa.a,{type:"flex",justify:"center"},n.a.createElement(ra.a,null,n.a.createElement(ja.a,{type:"file",accept:"image/*",onChange:this.handleFileUpload})),n.a.createElement(ra.a,{style:{marginTop:10}},n.a.createElement(va.a,{shape:"square",size:100,icon:"picture",src:l})))))}}]),t}(r.Component),un=Object(s.b)(function(e){return{user:e.user}})(pn),dn=(a(177),function(e){function t(){var e,a;Object(Yt.a)(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(a=Object(Ht.a)(this,(e=Object(Vt.a)(t)).call.apply(e,[this].concat(n)))).advanceRegistration=function(e){e.preventDefault(),a.props.handleRegisterNavButton("user")},a}return Object(Wt.a)(t,e),Object(Ft.a)(t,[{key:"render",value:function(){var e=this.props,t=e.registration,a=e.handleInputChangeFor;return n.a.createElement("form",{onSubmit:this.advanceRegistration},n.a.createElement(aa.a,{type:"flex",justify:"center"},n.a.createElement(ra.a,{span:18,style:{margin:"10px 0px"}},n.a.createElement("h3",null,"Please enter your public profile info.")),n.a.createElement(ra.a,{span:18,style:{marginBottom:"10px"}},n.a.createElement("label",{htmlFor:"first_name"},"First Name:",n.a.createElement(ja.a,{placeholder:"Enter your first name",type:"text",name:"first_name",value:t.first_name,onChange:a,required:!0}))),n.a.createElement(ra.a,{span:18,style:{marginBottom:"10px"}},n.a.createElement("label",{htmlFor:"last_name"},"Last Name:",n.a.createElement(ja.a,{placeholder:"Enter your last name",type:"text",name:"last_name",value:t.last_name,onChange:a,required:!0}))),n.a.createElement(ra.a,{span:18,style:{marginBottom:"10px"}},n.a.createElement(un,{photoDetails:{typeOfPhoto:"REGISTER",title:"Choosing New Profile Photo",buttonName:"Add Profile Photo"}})),n.a.createElement(ra.a,{span:12},n.a.createElement(ea.a,{type:"primary",htmlType:"submit",className:"registration-button"},"Next",n.a.createElement(xa.a,{type:"right"})))))}}]),t}(r.Component)),hn=Object(s.b)()(dn),mn=function(e){function t(){var e,a;Object(Yt.a)(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(a=Object(Ht.a)(this,(e=Object(Vt.a)(t)).call.apply(e,[this].concat(n)))).registerUser=function(e){e.preventDefault();var t=a.props.registration,r=t.first_name,n=t.last_name,o=t.email,c=t.password,i=t.profile_pic,s=t.confirm_email,l=t.confirm_password;r&&n&&o.toUpperCase()===s.toUpperCase()&&c===l?a.props.dispatch({type:"REGISTER",payload:{first_name:r,last_name:n,email:o.toUpperCase(),password:c,profile_pic:i}}):a.props.dispatch({type:"REGISTRATION_INPUT_ERROR"})},a}return Object(Wt.a)(t,e),Object(Ft.a)(t,[{key:"render",value:function(){var e=this.props,t=e.registration,a=e.handleInputChangeFor,r=e.handleRegisterNavButton;return n.a.createElement("form",{onSubmit:this.registerUser},n.a.createElement(aa.a,{type:"flex",justify:"space-around"},n.a.createElement(ra.a,{span:18,style:{margin:"10px 0px"}},n.a.createElement("h3",null,"Please enter your log in information.")),n.a.createElement(ra.a,{span:18,style:{marginBottom:"10px"}},n.a.createElement("label",{htmlFor:"email"},n.a.createElement(ja.a,{placeholder:"yourname@email.com",onChange:a,name:"email",value:t.email,required:!0}))),n.a.createElement(ra.a,{span:18,style:{marginBottom:"10px"}},n.a.createElement("label",{htmlFor:"confirm_email"},"Confirm Email:",n.a.createElement(ja.a,{placeholder:"yourname@email.com",type:"email",name:"confirm_email",value:t.confirm_email,onChange:a,required:!0}))),n.a.createElement(ra.a,{span:18,style:{marginBottom:"10px"}},n.a.createElement("label",{htmlFor:"password"},"Password:",n.a.createElement(ja.a,{placeholder:"Enter your password",type:"password",name:"password",value:t.password,onChange:a,required:!0}))),n.a.createElement(ra.a,{span:18,style:{marginBottom:"10px"}},n.a.createElement("label",{htmlFor:"confirm_password"},"Confirm Password:",n.a.createElement(ja.a,{placeholder:"Re-enter your password",type:"password",name:"confirm_password",value:t.confirm_password,onChange:a,required:!0}))),n.a.createElement(ra.a,{span:8},n.a.createElement(ea.a,{onClick:r.bind(this,"profile"),className:"registration-button"},n.a.createElement(xa.a,{type:"left"}),"Back")),n.a.createElement(ra.a,{span:8},n.a.createElement(ea.a,{onClick:this.registerUser,type:"primary",htmlType:"submit",className:"registration-button"},"Register "))))}}]),t}(r.Component),En=Object(s.b)()(mn),yn=function(e){function t(){var e,a;Object(Yt.a)(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(a=Object(Ht.a)(this,(e=Object(Vt.a)(t)).call.apply(e,[this].concat(n)))).state={page:"profile"},a.handleInputChangeFor=function(e){a.props.dispatch({type:"UPDATE_REGISTRATION",payload:Object(Sa.a)({},e.target.name,e.target.value)})},a.handleRegisterNavButton=function(e,t){a.setState({page:e})},a.showRegisterErrorMessage=function(){Qt.a.open({key:"registerMessage",message:"Error with Registration",description:a.props.errors.registrationMessage,duration:4}),a.props.dispatch({type:"CLEAR_REGISTRATION_ERROR"})},a}return Object(Wt.a)(t,e),Object(Ft.a)(t,[{key:"render",value:function(){var e=this,t=this.props.registration;return n.a.createElement("div",null,this.props.errors.registrationMessage&&this.showRegisterErrorMessage(),n.a.createElement(aa.a,null,n.a.createElement(ra.a,null,n.a.createElement(Ea,{headerText:"New User Registration"})),"profile"===this.state.page&&n.a.createElement(ra.a,null,n.a.createElement(hn,{registration:t,handleInputChangeFor:this.handleInputChangeFor,handleRegisterNavButton:this.handleRegisterNavButton})),"user"===this.state.page&&n.a.createElement(ra.a,null,n.a.createElement(En,{registration:t,handleInputChangeFor:this.handleInputChangeFor,handleRegisterNavButton:this.handleRegisterNavButton})),n.a.createElement(ra.a,{style:{margin:"20px",float:"left"}},n.a.createElement(ea.a,{onClick:function(){e.props.dispatch({type:"SET_TO_LOGIN_MODE"})}},"Return to Login"))))}}]),t}(r.Component),fn=Object(s.b)(function(e){return{errors:e.errors,registration:e.user.registration}})(yn),bn=Object(s.b)(function(e){return{user:e.user.userInfo,loginMode:e.loginMode}})(function(e){var t,a=e.component,r=e.user,o=e.loginMode,c=Object(cn.a)(e,["component","user","loginMode"]);return t=r.id?a:"login"===o?ln:fn,n.a.createElement(Xt.a,Object.assign({},c,{component:t}))}),vn=a(21),gn=function(e){function t(){var e,a;Object(Yt.a)(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(a=Object(Ht.a)(this,(e=Object(Vt.a)(t)).call.apply(e,[this].concat(n)))).addFakePeople=function(e){vn.post("/fakes")},a.addFakeStories=function(e){vn.post("/fakes/story")},a.addFakeChapters=function(e){vn.post("fakes/chapter")},a.addFakeLikes=function(e){vn.post("fakes/likes")},a}return Object(Wt.a)(t,e),Object(Ft.a)(t,[{key:"render",value:function(){return n.a.createElement("div",null,n.a.createElement("div",null,n.a.createElement("button",{onClick:this.addFakePeople},"Add 300 people to the database"),n.a.createElement("br",null),n.a.createElement("button",{onClick:this.addFakeStories},"Add 30 stories to the database"),n.a.createElement("br",null),n.a.createElement("button",{onClick:this.addFakeChapters},"Add 50 chapters to the database"),n.a.createElement("br",null),n.a.createElement("button",{onClick:this.addFakeLikes},"Add 25 likes to random stories")))}}]),t}(r.Component),On=a(391),Tn=(a(368),function(e){function t(){return Object(Yt.a)(this,t),Object(Ht.a)(this,Object(Vt.a)(t).apply(this,arguments))}return Object(Wt.a)(t,e),Object(Ft.a)(t,[{key:"componentDidMount",value:function(){this.props.dispatch({type:"FETCH_USER"})}},{key:"render",value:function(){return n.a.createElement(zt.a,null,n.a.createElement("div",null,n.a.createElement(aa.a,{type:"flex",justify:"center",align:"middle",className:"nav"},n.a.createElement(ra.a,{span:3},void 0!==this.props.user.id&&n.a.createElement(on,null)),n.a.createElement(ra.a,{span:18},n.a.createElement(qt.a,{to:"/home"},n.a.createElement("img",{src:"./images/kevinslogos/JourneyTellr-Nameonly-color-noR.png",alt:"logo",className:"logo"}))),n.a.createElement(ra.a,{span:3})),n.a.createElement(Kt.a,null,n.a.createElement(Jt.a,{exact:!0,from:"/",to:"/home"}),n.a.createElement(bn,{exact:!0,path:"/notification",component:_a}),n.a.createElement(bn,{exact:!0,path:"/choose-template",component:Mr}),n.a.createElement(bn,{exact:!0,path:"/profile",component:Ua}),n.a.createElement(bn,{exact:!0,path:"/search",component:qa}),n.a.createElement(bn,{exact:!0,path:"/home",component:fa}),n.a.createElement(bn,{exact:!0,path:"/contributor",component:fr}),n.a.createElement(bn,{exact:!0,path:"/existing-story/:id",component:kr}),n.a.createElement(bn,{exact:!0,path:"/existing-story/:id/chapter/:chapterId",component:kr}),n.a.createElement(Xt.a,{exact:!0,path:"/fake-data",component:gn}),n.a.createElement(bn,{exact:!0,path:"/choose-template/detail/",component:Br}),n.a.createElement(bn,{exact:!0,path:"/choose-template/chapter/",component:Vr}),n.a.createElement(bn,{exact:!0,path:"/choose-template/contributor/",component:qr}),n.a.createElement(Xt.a,{render:function(){return n.a.createElement("h1",null,"404")}})),n.a.createElement(On.a,null)))}}]),t}(r.Component)),_n=Object(s.b)(function(e){return{user:e.user.userInfo}})(Tn),Sn=Object(l.a)(),jn=[Sn],xn=Object(i.d)(I,i.a.apply(void 0,jn));Sn.run(Bt),c.a.render(n.a.createElement(s.a,{store:xn},n.a.createElement(_n,null)),document.getElementById("react-root"))}},[[201,1,2]]]);
//# sourceMappingURL=main.dd0c49e1.chunk.js.map